{"remainingRequest":"/Users/lirongzhi/Documents/深圳善链/h5/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lirongzhi/Documents/深圳善链/h5/src/view/wallet/transfer/message.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lirongzhi/Documents/深圳善链/h5/src/view/wallet/transfer/message.vue","mtime":1572538946859},{"path":"/Users/lirongzhi/Documents/深圳善链/h5/node_modules/cache-loader/dist/cjs.js","mtime":1572539003414},{"path":"/Users/lirongzhi/Documents/深圳善链/h5/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport navBar from '../../../component/navBar';\nimport { Popup,Icon  } from 'vant';\nimport countTo from 'vue-count-to';\nimport mixins from '../../../common/mixin';\nexport default {\n    components: {\n        navBar,\n        Popup,\n        Icon,\n        countTo\n    },\n    mixins: [mixins],\n    data: () => ({\n        show: false,\n        name:\"\",     //收款方名称\n        currencyId:\"\",  //币种ID\n        title:\"\",  //币种名字\n        mobile:\"\",  //手机号码\n        money:\"\" ,     //输入的金额\n        available:\"\" ,   //可用余额\n        password:\"\" ,  //密码\n        account: 0    //到账金额\n    }),\n    created() {\n        this.initialization()\n    },\n    mounted(){\n\n    },\n    methods:{\n        //初始化信息\n        initialization:function () {\n            this.name =this.$route.query.name.substring(1,10);\n            this.currencyId =this.$route.query.id;\n            this.mobile  = this.$route.query.mobile;\n            if(this.$route.query.id == 3){\n                this.title = \"UTD\";\n            }\n            if (this.$route.query.id == 2){\n                this.title = \"INE\";\n            }\n            if (this.$route.query.id == 1){\n                this.title = \"ETH\";\n            }\n            //资产可用余额\n            this.request({\n                url: 'api/assets',\n                method: 'POST',\n                data: {\n                    size:10,\n                    page:1,\n                    currency_id:this.$route.query.id,\n                    type:1\n                },\n                success: (response) => {\n                    this.available = response.astir_currency\n                },\n                error: (response) => {\n\n                },\n                complete: (response) => {\n\n                }\n            });\n        },\n        showPopup() {\n            //校验输入框金额是否为空\n            if(this.money !== \"\"){\n                //校验输入金额大于手续费\n                if(this.money > 10){\n                    //校验可用余额\n                    if(Number(this.money) <= Number(this.available)){\n                        this.show = true;\n                    }\n                    else {\n                        this.$toast.center('可用余额不足');\n                    }\n                }\n                else {\n                    this.$toast.center('最小转账数量需大于手续费');\n                }\n            }\n            else {\n                this.$toast.center('转账金额不能为空');\n            }\n        },\n        showpopup(){\n            this.show = false;\n        },\n        payment(){\n            //校验密码\n            this.request({\n                url: 'api/check',\n                method: 'POST',\n                data: {\n                    password: this.password\n                },\n                success: (response) => {\n                    //转账\n                    this.request({\n                        url: 'api/transfer-set',\n                        method: 'POST',\n                        data: {\n                            amount:this.money,\n                            get_user_id:this.$route.query.userId,\n                            charge_nums:10,\n                            currency_id:this.$route.query.id\n                        },\n                        success: (response) => {\n                            this.$toast.center('转账成功');\n                            this.$router.push({\n                                path:\"/wallet/detailed\",\n                                query: {\n                                       id:response.id,\n                                       skip:1\n                                }\n                            })\n                        },\n                        error: (response) => {\n\n                        },\n                        complete: (response) => {\n\n                        }\n                    });\n\n                },\n                error: (response) => {\n\n                },\n                complete: (response) => {\n\n                }\n            });\n\n        },\n        whole:function () {\n            this.money = Number(this.available).toFixed(2);\n            this.moneyChange();\n        },\n        handleInput(e) {\n            e.target.value = (e.target.value.match(/^\\d*(\\.?\\d{0,1})/g)[0]) || null\n        },\n        //处理软键盘导致弹框里的按钮响应区域错位\n        scrollBack: function () {\n            setTimeout(function() {\n                var scrollHeight = document.documentElement.scrollTop || document.body.scrollTop || 0;\n                window.scrollTo(0, Math.max(scrollHeight - 1, 0));\n            }, 100);\n        },\n        moneyChange:function () {\n            if(this.money <= 10){\n                this.account = 0\n            }\n            else {\n                this.account = this.money - 10\n            }\n        }\n    }\n}\n",{"version":3,"sources":["message.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"message.vue","sourceRoot":"src/view/wallet/transfer","sourcesContent":["<template>\n    <div>\n        <navBar title=\"转账\" class=\"transferBottom\"/>\n        <div class=\"message\">\n            <img src=\"../../my/image/author.png\">\n            <p>*{{name}}</p>\n            <p>{{mobile}}</p>\n        </div>\n        <div class=\"messageContent\">\n            <!--转账金额-->\n            <div class=\"money\">\n            <p class=\"moneyTitle\">转账金额</p>\n            <div class=\"moneyInput\">\n                <input type=\"number\"  placeholder=\"请输入转账金额\"  v-model=\"money\" @input=\"moneyChange\" @blur=\"scrollBack\"  @keydown=\"handleInput\" />\n                <div class=\"moneyButton\">\n                    <p>{{title}}</p>\n                    <p>|</p>\n                    <p @click=\"whole\">全部</p>\n                </div>\n            </div>\n            <div class=\"available\">可用余额:  <countTo :startVal='0' :decimals=\"2\" :endVal='Number(available)' :duration='1'></countTo> {{title}}</div>\n            </div>\n            <!--手续费-->\n            <div class=\"poundage\">\n                <p class=\"moneyTitle\">手续费</p>\n                <div class=\"moneyInput\">\n                    <p>10.00</p>\n                    <p>UTD</p>\n                </div>\n            </div>\n            <!--到账数量-->\n            <div class=\"accountText\">\n                <p>到账数量</p>\n                <p><countTo :startVal='0' :decimals=\"2\" :endVal='Number(account)' :duration='1'></countTo> {{title}}</p>\n            </div>\n            <div class=\"transferButton\" @click=\"showPopup\">\n                确认转账\n            </div>\n        </div>\n        <!--弹出层-->\n        <van-popup v-model=\"show\"  position=\"bottom\"\n                   :style=\"{ height: '267px' }\">\n            <div class=\"verification\">\n                <van-icon name=\"arrow-left\" @click=\"showpopup\"/>\n                <p>校验登录密码</p>\n            </div>\n            <div class=\"verificationInput\">\n                <input type=\"password\"  placeholder=\"请输入密码\" v-model=\"password\" @blur=\"scrollBack\" />\n            </div>\n            <div class=\"verificationButton\" @click=\"payment\">\n                          确认\n            </div>\n        </van-popup>\n    </div>\n</template>\n<style src=\"./message.css\" scoped></style>\n<script>\n    import navBar from '../../../component/navBar';\n    import { Popup,Icon  } from 'vant';\n    import countTo from 'vue-count-to';\n    import mixins from '../../../common/mixin';\n    export default {\n        components: {\n            navBar,\n            Popup,\n            Icon,\n            countTo\n        },\n        mixins: [mixins],\n        data: () => ({\n            show: false,\n            name:\"\",     //收款方名称\n            currencyId:\"\",  //币种ID\n            title:\"\",  //币种名字\n            mobile:\"\",  //手机号码\n            money:\"\" ,     //输入的金额\n            available:\"\" ,   //可用余额\n            password:\"\" ,  //密码\n            account: 0    //到账金额\n        }),\n        created() {\n            this.initialization()\n        },\n        mounted(){\n\n        },\n        methods:{\n            //初始化信息\n            initialization:function () {\n                this.name =this.$route.query.name.substring(1,10);\n                this.currencyId =this.$route.query.id;\n                this.mobile  = this.$route.query.mobile;\n                if(this.$route.query.id == 3){\n                    this.title = \"UTD\";\n                }\n                if (this.$route.query.id == 2){\n                    this.title = \"INE\";\n                }\n                if (this.$route.query.id == 1){\n                    this.title = \"ETH\";\n                }\n                //资产可用余额\n                this.request({\n                    url: 'api/assets',\n                    method: 'POST',\n                    data: {\n                        size:10,\n                        page:1,\n                        currency_id:this.$route.query.id,\n                        type:1\n                    },\n                    success: (response) => {\n                        this.available = response.astir_currency\n                    },\n                    error: (response) => {\n\n                    },\n                    complete: (response) => {\n\n                    }\n                });\n            },\n            showPopup() {\n                //校验输入框金额是否为空\n                if(this.money !== \"\"){\n                    //校验输入金额大于手续费\n                    if(this.money > 10){\n                        //校验可用余额\n                        if(Number(this.money) <= Number(this.available)){\n                            this.show = true;\n                        }\n                        else {\n                            this.$toast.center('可用余额不足');\n                        }\n                    }\n                    else {\n                        this.$toast.center('最小转账数量需大于手续费');\n                    }\n                }\n                else {\n                    this.$toast.center('转账金额不能为空');\n                }\n            },\n            showpopup(){\n                this.show = false;\n            },\n            payment(){\n                //校验密码\n                this.request({\n                    url: 'api/check',\n                    method: 'POST',\n                    data: {\n                        password: this.password\n                    },\n                    success: (response) => {\n                        //转账\n                        this.request({\n                            url: 'api/transfer-set',\n                            method: 'POST',\n                            data: {\n                                amount:this.money,\n                                get_user_id:this.$route.query.userId,\n                                charge_nums:10,\n                                currency_id:this.$route.query.id\n                            },\n                            success: (response) => {\n                                this.$toast.center('转账成功');\n                                this.$router.push({\n                                    path:\"/wallet/detailed\",\n                                    query: {\n                                           id:response.id,\n                                           skip:1\n                                    }\n                                })\n                            },\n                            error: (response) => {\n\n                            },\n                            complete: (response) => {\n\n                            }\n                        });\n\n                    },\n                    error: (response) => {\n\n                    },\n                    complete: (response) => {\n\n                    }\n                });\n\n            },\n            whole:function () {\n                this.money = Number(this.available).toFixed(2);\n                this.moneyChange();\n            },\n            handleInput(e) {\n                e.target.value = (e.target.value.match(/^\\d*(\\.?\\d{0,1})/g)[0]) || null\n            },\n            //处理软键盘导致弹框里的按钮响应区域错位\n            scrollBack: function () {\n                setTimeout(function() {\n                    var scrollHeight = document.documentElement.scrollTop || document.body.scrollTop || 0;\n                    window.scrollTo(0, Math.max(scrollHeight - 1, 0));\n                }, 100);\n            },\n            moneyChange:function () {\n                if(this.money <= 10){\n                    this.account = 0\n                }\n                else {\n                    this.account = this.money - 10\n                }\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}