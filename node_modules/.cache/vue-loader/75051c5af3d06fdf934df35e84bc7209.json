{"remainingRequest":"/Users/lirongzhi/Documents/深圳善链/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lirongzhi/Documents/深圳善链/src/view/plus/shopx/order/orderList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lirongzhi/Documents/深圳善链/src/view/plus/shopx/order/orderList.vue","mtime":1572538946847},{"path":"/Users/lirongzhi/Documents/深圳善链/node_modules/cache-loader/dist/cjs.js","mtime":1572539003414},{"path":"/Users/lirongzhi/Documents/深圳善链/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport navBar from '../../../../component/navBar';\nimport { Tab, Tabs  } from 'vant';\nimport mixins from '../../../../common/mixin';\nimport Footer from '../component/footer/footer';\nexport default {\n    components:{\n        navBar,\n        Tab,\n        Tabs,\n        Footer\n    },\n    mixins: [mixins],\n    data: () => ({\n        size: 10,\n        page: 1,\n        active: 1,\n        loading: false,         // 滚动加载参数\n        finished: false,        // 滚动加载参数\n        transferRecord: {},     // 请求回来的数据\n        historyList: [],        // 历史列表\n        status:0,      //列表切换下滑索引\n\n\n    }),\n    created () {\n\n    },\n    mounted(){\n     this.orderList()\n    },\n    beforeRouteEnter(to, from, next) {\n        next(vm=>{          //  这里的vm指的就是vue实例，可以用来当做this使用\n            sessionStorage.setItem('url_from', from.path);\n        })\n    },\n    methods: {\n        // 下拉加载\n        rollLoad: function() {\n            if(this.historyList.length < this.transferRecord.total) {\n                this.page += 1;\n                this.orderList();\n            } else{\n                this.loading = false;\n                this.finished = true;\n            }\n        },\n        //订单列表信息\n        orderList:function () {\n            this.request({\n                url: 'api/store/orders',\n                method: 'GET',\n                data: {\n                    \"name\": \"\",\n                    \"status\": this.status,\n                    \"page\": this.page,\n                    \"size\": this.size\n                },\n                success: (response) => {\n                     this.transferRecord = response;\n                     this.historyList = this.historyList.concat(this.transferRecord.list);\n                },\n                error: (response) => {\n                },\n                complete: (response) => {\n                    // 关闭列表滚动\n                    this.loading = false;\n                    if(this.historyList.length >= this.transferRecord.total){\n                        this.finished = true;\n                    }\n                }\n            });\n        },\n        handleSeach:function(){\n            this.$router.push({\n                path:\"/plus/shopx/order/seach\"\n            })\n        },\n        shopkeeperImg:function () {\n            this.$router.push({\n                path:\"/plus/shopx/index\"\n            })\n        },\n        detailed:function (e) {\n            this.$router.push({\n                path:\"/plus/shopx/order/detailed\",\n                query:{\n                    id:e\n                }\n            })\n        },\n        onClick(name) {\n            this.status = name;\n            this.page = 1;\n            this.request({\n                url: 'api/store/orders',\n                method: 'GET',\n                data: {\n                    \"name\": \"\",\n                    \"status\": name,\n                    \"page\": this.page,\n                    \"size\": this.size\n                },\n                success: (response) => {\n                    this.historyList=[];\n                    this.transferRecord = response;\n                    this.historyList = this.historyList.concat(this.transferRecord.list);\n                },\n                error: (response) => {\n                },\n                complete: (response) => {\n                    // 关闭列表滚动\n\n                }\n            });\n        },\n        //查看物流\n        handexpress:function (e) {\n            this.$router.push({\n                path:\"/plus/shopx/order/express\",\n                query: {\n                    id:e\n                }\n            })\n        }\n    }\n}\n",{"version":3,"sources":["orderList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"orderList.vue","sourceRoot":"src/view/plus/shopx/order","sourcesContent":["<template>\n    <div class=\"orderList\" style=\"-webkit-overflow-scrolling:touch\">\n        <div class=\"shopkeeperImg\" >\n            订单列表\n        </div>\n        <div>\n            <van-tabs @click=\"onClick\">\n                <van-tab title=\"全部\"></van-tab>\n                <van-tab title=\"待支付\"></van-tab>\n                <van-tab title=\"待发货\"></van-tab>\n                <van-tab title=\"待收货\"></van-tab>\n            </van-tabs>\n        </div>\n        <van-list v-model=\"loading\"\n                  :finished=\"finished\"\n                  :offset=\"200\"\n                  :immediate-check=\"false\"\n                  finished-text=\"没有更多了\"\n                  @load=\"rollLoad\" >\n        <div class=\"orderStatus\"  @click.stop=\"detailed(item.id)\"  v-for=\"(item, index) in historyList\"\n             :key=\"index\">\n                 <div class=\"orderDate\">\n                     <p>{{item.created_at}}</p>\n                     <p v-if=\"item.state_text.value!==6\">{{item.state_text.text}}</p>\n                     <p v-if=\"item.state_text.value ===6\">待发货</p>\n                 </div>\n                <div class=\"specifications\">\n                    <img :src=\"item.goods[0].image.file.path\"  v-if=\"item.goods[0].image\"/>\n                    <img  v-else>\n                    <div class=\"specifications-text\">\n                        <p>{{item.goods[0].name.length > 34 ? item.goods[0].name.substring(0,34)+ \"...\":item.goods[0].name }}</p>\n                        <span v-if=\"item.goods[0].goods_attr !== ''\">{{item.goods[0].goods_attr}} </span>\n                        <div class=\"price\">\n                               <p>￥{{item.goods[0].total_pay_price}} </p>\n                               <p> X {{item.goods[0].total_quantity}}</p>\n                         </div>\n                    </div>\n                </div>\n               <div class=\"amount\">\n                <p>合计: ￥{{item.pay_price}} </p>\n                <span @click.stop=\"handexpress(item.id)\"  v-if=\"item.state_text.value === 4\" >查询物流</span>\n                <p  v-if=\"item.state_text.value === 6\" >取消申请中</p>\n                </div>\n            </div>\n        </van-list>\n\n        <Footer  :active=\"1\" />\n    </div>\n</template>\n<style src=\"./orderList.css\" scoped></style>\n<script>\n    import navBar from '../../../../component/navBar';\n    import { Tab, Tabs  } from 'vant';\n    import mixins from '../../../../common/mixin';\n    import Footer from '../component/footer/footer';\n    export default {\n        components:{\n            navBar,\n            Tab,\n            Tabs,\n            Footer\n        },\n        mixins: [mixins],\n        data: () => ({\n            size: 10,\n            page: 1,\n            active: 1,\n            loading: false,         // 滚动加载参数\n            finished: false,        // 滚动加载参数\n            transferRecord: {},     // 请求回来的数据\n            historyList: [],        // 历史列表\n            status:0,      //列表切换下滑索引\n\n\n        }),\n        created () {\n\n        },\n        mounted(){\n         this.orderList()\n        },\n        beforeRouteEnter(to, from, next) {\n            next(vm=>{          //  这里的vm指的就是vue实例，可以用来当做this使用\n                sessionStorage.setItem('url_from', from.path);\n            })\n        },\n        methods: {\n            // 下拉加载\n            rollLoad: function() {\n                if(this.historyList.length < this.transferRecord.total) {\n                    this.page += 1;\n                    this.orderList();\n                } else{\n                    this.loading = false;\n                    this.finished = true;\n                }\n            },\n            //订单列表信息\n            orderList:function () {\n                this.request({\n                    url: 'api/store/orders',\n                    method: 'GET',\n                    data: {\n                        \"name\": \"\",\n                        \"status\": this.status,\n                        \"page\": this.page,\n                        \"size\": this.size\n                    },\n                    success: (response) => {\n                         this.transferRecord = response;\n                         this.historyList = this.historyList.concat(this.transferRecord.list);\n                    },\n                    error: (response) => {\n                    },\n                    complete: (response) => {\n                        // 关闭列表滚动\n                        this.loading = false;\n                        if(this.historyList.length >= this.transferRecord.total){\n                            this.finished = true;\n                        }\n                    }\n                });\n            },\n            handleSeach:function(){\n                this.$router.push({\n                    path:\"/plus/shopx/order/seach\"\n                })\n            },\n            shopkeeperImg:function () {\n                this.$router.push({\n                    path:\"/plus/shopx/index\"\n                })\n            },\n            detailed:function (e) {\n                this.$router.push({\n                    path:\"/plus/shopx/order/detailed\",\n                    query:{\n                        id:e\n                    }\n                })\n            },\n            onClick(name) {\n                this.status = name;\n                this.page = 1;\n                this.request({\n                    url: 'api/store/orders',\n                    method: 'GET',\n                    data: {\n                        \"name\": \"\",\n                        \"status\": name,\n                        \"page\": this.page,\n                        \"size\": this.size\n                    },\n                    success: (response) => {\n                        this.historyList=[];\n                        this.transferRecord = response;\n                        this.historyList = this.historyList.concat(this.transferRecord.list);\n                    },\n                    error: (response) => {\n                    },\n                    complete: (response) => {\n                        // 关闭列表滚动\n\n                    }\n                });\n            },\n            //查看物流\n            handexpress:function (e) {\n                this.$router.push({\n                    path:\"/plus/shopx/order/express\",\n                    query: {\n                        id:e\n                    }\n                })\n            }\n        }\n    }\n</script>\n<style scoped>\n\n</style>"]}]}