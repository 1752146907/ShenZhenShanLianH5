{"remainingRequest":"/Users/lirongzhi/Documents/深圳善链/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lirongzhi/Documents/深圳善链/src/view/wallet/addres/edit.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/lirongzhi/Documents/深圳善链/src/view/wallet/addres/edit.vue","mtime":1572538946851},{"path":"/Users/lirongzhi/Documents/深圳善链/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/lirongzhi/Documents/深圳善链/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/lirongzhi/Documents/深圳善链/node_modules/@vue/cli-service/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lirongzhi/Documents/深圳善链/node_modules/cache-loader/dist/cjs.js","mtime":1572539003414},{"path":"/Users/lirongzhi/Documents/深圳善链/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.addres-edit .bar .bar-back{\n    display: none !important;\n}\n",{"version":3,"sources":["edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA","file":"edit.vue","sourceRoot":"src/view/wallet/addres","sourcesContent":["<template>\n    <div class=\"addres addres-edit\">\n        <div class=\"navBar\">\n            <navBar title=\"编辑地址\"></navBar>\n            <span class=\"edit\" @click=\"handleBack\">完成</span>\n        </div>\n        <van-list v-model=\"loading\"\n                  :finished=\"finished\"\n                  :offset=\"100\"\n                  :immediate-check=\"false\"\n                  finished-text=\"没有更多了\"\n                  @load=\"rollLoad\" >\n            <div class=\"addres-title\">\n                <div class=\"addres-left\">\n                    名称\n                </div>\n                <div class=\"addres-right\">\n                    地址\n                </div>\n            </div>\n            <div class=\"addres-body\">\n                <div class=\"addres-body-item\"\n                     v-for=\"(item, index) in List\"\n                     :key=\"item.id\"\n                     @click=\"handleSelect(item.id, index)\" >\n                    <div class=\"radio\">\n                        <van-icon v-if=\"item.active\" size=\"21\" name=\"checked\" />\n                        <van-icon v-else size=\"20\" name=\"circle\" />\n                    </div>\n                    <div class=\"title\">{{item.name}}</div>\n                    <div class=\"addres\">{{item.address}}</div>\n                </div>\n            </div>\n            <div class=\"from\">\n                <div class=\"from-submit\" @click=\"handleDelte\">删除地址</div>\n            </div>\n        </van-list>\n    </div>\n</template>\n\n<style>\n    .addres-edit .bar .bar-back{\n        display: none !important;\n    }\n</style>\n<style src=\"./edit.css\" scoped></style>\n\n<script>\n    import countTo from 'vue-count-to';\n    import mixins from '../../../common/mixin';\n    import navBar from '../../../component/navBar';\n\n    export default {\n        components: {\n            countTo,\n            navBar\n        },\n        mixins: [mixins],\n        data: () => ({\n            page: 1,\n            size: 15,\n            List: [],\n            addresList: [],\n            loading: false,         // 滚动加载参数\n            finished: false         // 滚动加载参数\n        }),\n        mounted() {\n            this.handleLoad();\n        },\n        methods: {\n            // 下拉加载\n            rollLoad: function() {\n                if(this.List.length < this.addresList.total) {\n                    this.page += 1;\n                    this.handleLoad();\n                } else{\n                    this.loading = false;\n                    this.finished = true;\n                }\n            },\n            handleLoad: function () {\n                this.request({\n                    url: 'api/address',\n                    method: 'GET',\n                    data: {\n                        currency_id: this.$route.query.id,\n                        size: this.size,\n                        page: this.page\n                    },\n                    success: (response) => {\n                        this.List = this.List.concat(response.data);\n                        this.addresList = response;\n\n                        this.List.map((data) => {\n                            data.active = false;\n                        })\n                    },\n                    error: (response) => {\n\n                    },\n                    complete: (response) => {\n                        // 关闭列表滚动\n                        this.loading = false;\n                        if(this.List.length >= this.addresList.total){\n                            this.finished = true;\n                        }\n                    }\n                });\n            },\n            handleSelect: function (id, index) {\n                this.List[index].active = !this.List[index].active;\n                // 防止视图不更新\n                this.$set(this.List, index, this.List[index]);\n            },\n            handleDelte: function () {\n                let idArr = []\n                this.List.map((data) => {\n                    if(data.active) {\n                        idArr.push(data.id)\n                    }\n                });\n\n                this.request({\n                    url: 'api/address',\n                    method: 'PUT',\n                    data: {\n                        id: idArr\n                    },\n                    success: (response) => {\n                        this.$toast.center('删除成功');\n                        this.List = [];\n\n                        this.handleLoad();\n                    },\n                    error: (response) => {\n\n                    },\n                    complete: (response) => {\n\n                    }\n                });\n            }\n        },\n        // 设置路由钩子，存储页面来源\n        beforeRouteEnter(to, from, next) {\n            next(vm=>{          //  这里的vm指的就是vue实例，可以用来当做this使用\n                sessionStorage.setItem('url_from', from.path);\n            })\n        }\n    }\n</script>\n"]}]}