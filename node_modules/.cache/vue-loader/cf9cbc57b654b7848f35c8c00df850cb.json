{"remainingRequest":"/Users/lirongzhi/Documents/深圳善链/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lirongzhi/Documents/深圳善链/src/view/notice/seach.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lirongzhi/Documents/深圳善链/src/view/notice/seach.vue","mtime":1572538946828},{"path":"/Users/lirongzhi/Documents/深圳善链/node_modules/cache-loader/dist/cjs.js","mtime":1572539003414},{"path":"/Users/lirongzhi/Documents/深圳善链/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport mixins from '../../common/mixin';\nimport { Pagination } from 'vant';\nimport navBar from '../../component/navBar';\nimport Seach from '../../component/seach';\n\nexport default {\n    components: {\n        Pagination,\n        navBar,\n        Seach\n    },\n    mixins: [mixins],\n    data: () => ({\n        currentPage: 1,\n        seachKey: \"\",           // 搜索关键字\n        notice: {},             // 初始化数据\n        page: 1,                // 请求页码\n        pageCount: 0            // 总页数\n    }),\n    mounted() {\n        if(this.$route.query.key) {\n            this.seachKey = this.$route.query.key;\n            this.handleSearch()\n        }\n    },\n    watch: {\n        // 监听路由变化\n        $route(){\n            if(this.$route.query.key) {\n                this.seachKey = this.$route.query.key;\n                this.handleSearch()\n            }\n        },\n    },\n    // 设置路由钩子，存储页面来源\n    beforeRouteEnter(to, from, next) {\n        next(vm=>{          //  这里的vm指的就是vue实例，可以用来当做this使用\n            sessionStorage.setItem('url_from', from.path);\n        })\n    },\n    methods: {\n        // 搜索\n        handleSearch() {\n            this.request({\n                url: 'api/notice-search',\n                method: 'POST',\n                data: {\n                    title: this.seachKey,\n                    page: this.page\n                },\n                success: (response) => {\n                    this.notice = response;\n                    // 计算页码\n                    let pageCount = Math.ceil(this.notice.total / this.notice.size);\n                    this.pageCount = pageCount;\n                },\n                error: (response) => {\n                },\n                complete: () => {\n\n                }\n            });\n        },\n        handleNoticeDetail: function(id){\n            this.$router.push({\n                path: '/noticeDetail',\n                query: {\n                    id: id\n                }\n            });\n        },\n        handleChangePage: function(e) {\n            this.page = e;\n            this.handleSearch();\n        },\n        handleUTD() {\n            this.$router.replace({\n                path: '/notice',\n                query: {}\n            });\n        }\n    }\n}\n",{"version":3,"sources":["seach.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"seach.vue","sourceRoot":"src/view/notice","sourcesContent":["<template>\n    <div class=\"main\">\n        <navBar title=\"公告中心\"></navBar>\n        <div class=\"hender\">\n            <div class=\"crumbs\">\n                <span @click=\"handleUTD\">公告中心</span>\n                >\n                搜索结果\n            </div>\n            <Seach></Seach>\n        </div>\n        <div class=\"document\">\n            <div class=\"document-title\">收入分配</div>\n            <div class=\"document-sub\">“{{seachKey}}”的结果：{{notice.total}}条</div>\n            <div class=\"document-body\">\n                <div class=\"dociment-body-box\">\n                    <div class=\"item\" v-for=\"(item, index) in notice.list\" :key=\"index\" @click=\"handleNoticeDetail(item.id)\">\n                        {{item.title}}\n                        <p>\n                            <span>公告中心</span>\n                            >\n                            <span>{{item.category.title}}</span></p>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"page\">\n            <!--<div class=\"page-item\" :class=\"index == 1 ? 'page-item-active' : ''\" v-for=\"index in 6\" :key=\"index\">{{index}}</div>\n            <div class=\"page-item\"><van-icon name=\"arrow\" size=\"10\" /></div>-->\n            <van-pagination\n                    v-model=\"currentPage\"\n                    :total-items=\"notice.total\"\n                    :show-page-size=\"notice.size\"\n                    :page-count=\"pageCount\"\n                    prev-text=\"<\"\n                    next-text=\">\"\n                    force-ellipses\n                    @change=\"handleChangePage\"\n            />\n        </div>\n    </div>\n</template>\n\n<style src=\"./seach.css\" scoped></style>\n\n<script>\n    import mixins from '../../common/mixin';\n    import { Pagination } from 'vant';\n    import navBar from '../../component/navBar';\n    import Seach from '../../component/seach';\n\n    export default {\n        components: {\n            Pagination,\n            navBar,\n            Seach\n        },\n        mixins: [mixins],\n        data: () => ({\n            currentPage: 1,\n            seachKey: \"\",           // 搜索关键字\n            notice: {},             // 初始化数据\n            page: 1,                // 请求页码\n            pageCount: 0            // 总页数\n        }),\n        mounted() {\n            if(this.$route.query.key) {\n                this.seachKey = this.$route.query.key;\n                this.handleSearch()\n            }\n        },\n        watch: {\n            // 监听路由变化\n            $route(){\n                if(this.$route.query.key) {\n                    this.seachKey = this.$route.query.key;\n                    this.handleSearch()\n                }\n            },\n        },\n        // 设置路由钩子，存储页面来源\n        beforeRouteEnter(to, from, next) {\n            next(vm=>{          //  这里的vm指的就是vue实例，可以用来当做this使用\n                sessionStorage.setItem('url_from', from.path);\n            })\n        },\n        methods: {\n            // 搜索\n            handleSearch() {\n                this.request({\n                    url: 'api/notice-search',\n                    method: 'POST',\n                    data: {\n                        title: this.seachKey,\n                        page: this.page\n                    },\n                    success: (response) => {\n                        this.notice = response;\n                        // 计算页码\n                        let pageCount = Math.ceil(this.notice.total / this.notice.size);\n                        this.pageCount = pageCount;\n                    },\n                    error: (response) => {\n                    },\n                    complete: () => {\n\n                    }\n                });\n            },\n            handleNoticeDetail: function(id){\n                this.$router.push({\n                    path: '/noticeDetail',\n                    query: {\n                        id: id\n                    }\n                });\n            },\n            handleChangePage: function(e) {\n                this.page = e;\n                this.handleSearch();\n            },\n            handleUTD() {\n                this.$router.replace({\n                    path: '/notice',\n                    query: {}\n                });\n            }\n        }\n    }\n</script>\n"]}]}