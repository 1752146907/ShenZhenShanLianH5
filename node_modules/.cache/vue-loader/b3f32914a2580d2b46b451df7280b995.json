{"remainingRequest":"/Users/lirongzhi/Documents/深圳善链/h5/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lirongzhi/Documents/深圳善链/h5/src/view/wallet/recharge/history.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lirongzhi/Documents/深圳善链/h5/src/view/wallet/recharge/history.vue","mtime":1572538946856},{"path":"/Users/lirongzhi/Documents/深圳善链/h5/node_modules/cache-loader/dist/cjs.js","mtime":1572539003414},{"path":"/Users/lirongzhi/Documents/深圳善链/h5/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport mixins from '../../../common/mixin';\nimport navBar from '../../../component/navBar';\nimport countTo from 'vue-count-to';\n\nexport default {\n    components: {\n        navBar,\n        countTo\n    },\n    mixins: [mixins],\n    data: () => ({\n        size: 10,\n        page: 1,\n        title: '',              // 标题\n        recharge: {},           // 初始化的数据\n        rechargeList: [],       // 充值列表\n        loading: false,         // 滚动加载参数\n        finished: false         // 滚动加载参数\n    }),\n    created () {\n\n    },\n    mounted() {\n        this.handleLoad();\n        this.title = this.$route.query.title;\n    },\n    // 设置路由钩子，存储页面来源\n    beforeRouteEnter(to, from, next) {\n        next(vm=>{          //  这里的vm指的就是vue实例，可以用来当做this使用\n            sessionStorage.setItem('url_from', from.path);\n        })\n    },\n    methods: {\n        // 下拉加载\n        rollLoad: function() {\n            if(this.rechargeList.length < this.recharge.total) {\n                this.page += 1;\n                this.handleLoad();\n            } else{\n                this.loading = false;\n                this.finished = true;\n            }\n        },\n        // 初始化数据\n        handleLoad: function() {\n            this.request({\n                url: 'api/recharge',\n                method: 'POST',\n                data: {\n                    \"size\": this.size,\n                    \"page\": this.page,\n                    \"currency_id\": this.$route.query.id\n                },\n                success: (response) => {\n                    this.recharge = response;\n\n                    this.recharge.data.map((data) => {\n                        // 数量转为整数\n                        data.amount = Number(data.amount).toFixed(2);\n                        // 截取年月日\n                        let YMD = data.created_at.indexOf(' ');\n                        data.created_YMD = data.created_at.slice(0, YMD)\n                        // 截取时分秒\n                        let TMS = data.created_at.indexOf(' ');\n                        data.created_TMS = data.created_at.slice(TMS+1, data.created_at.length)\n                    });\n\n                    this.rechargeList = this.rechargeList.concat(this.recharge.data)\n                },\n                error: (response) => {\n\n                },\n                complete: (response) => {\n                    // 关闭列表滚动\n                    this.loading = false;\n                    if(this.rechargeList.length >= this.recharge.total){\n                        this.finished = true;\n                    }\n                }\n            });\n        },\n        // 充值详情\n        handleWalletDetail: function(id) {\n            this.$router.push({\n                path: '/walletRechargeDetail',\n                query: {\n                    id: id\n                }\n            });\n        }\n    }\n}\n",{"version":3,"sources":["history.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"history.vue","sourceRoot":"src/view/wallet/recharge","sourcesContent":["<template>\n    <div class=\"main\">\n        <navBar :title=\"title + '收款记录'\"></navBar>\n        <div class=\"record\">\n            <van-list v-model=\"loading\"\n                      :finished=\"finished\"\n                      :offset=\"100\"\n                      :immediate-check=\"false\"\n                      finished-text=\"没有更多了\"\n                      @load=\"rollLoad\" >\n                <div class=\"record-item\"\n                     @click=\"handleWalletDetail(item.id)\"\n                     v-for=\"(item, index) in rechargeList\"\n                     :key=\"index\">\n                    <div class=\"record-item-body\">\n                        <div class=\"record-item-body-number\">\n                            收款\n                            <!--<p class=\"on\"> 0\">+{{item.amount}}</p>-->\n                            <p>\n                                {{item.created_YMD}} {{item.created_TMS}}\n                            </p>\n                        </div>\n                        <div class=\"record-item-body-time\">\n                            <p>\n                                +<countTo :startVal='0' :decimals=\"2\" :endVal='Number(item.amount)' :duration='1'></countTo>\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            </van-list>\n        </div>\n    </div>\n</template>\n\n<style src=\"./history.css\" scoped></style>\n\n<script>\n    import mixins from '../../../common/mixin';\n    import navBar from '../../../component/navBar';\n    import countTo from 'vue-count-to';\n\n    export default {\n        components: {\n            navBar,\n            countTo\n        },\n        mixins: [mixins],\n        data: () => ({\n            size: 10,\n            page: 1,\n            title: '',              // 标题\n            recharge: {},           // 初始化的数据\n            rechargeList: [],       // 充值列表\n            loading: false,         // 滚动加载参数\n            finished: false         // 滚动加载参数\n        }),\n        created () {\n\n        },\n        mounted() {\n            this.handleLoad();\n            this.title = this.$route.query.title;\n        },\n        // 设置路由钩子，存储页面来源\n        beforeRouteEnter(to, from, next) {\n            next(vm=>{          //  这里的vm指的就是vue实例，可以用来当做this使用\n                sessionStorage.setItem('url_from', from.path);\n            })\n        },\n        methods: {\n            // 下拉加载\n            rollLoad: function() {\n                if(this.rechargeList.length < this.recharge.total) {\n                    this.page += 1;\n                    this.handleLoad();\n                } else{\n                    this.loading = false;\n                    this.finished = true;\n                }\n            },\n            // 初始化数据\n            handleLoad: function() {\n                this.request({\n                    url: 'api/recharge',\n                    method: 'POST',\n                    data: {\n                        \"size\": this.size,\n                        \"page\": this.page,\n                        \"currency_id\": this.$route.query.id\n                    },\n                    success: (response) => {\n                        this.recharge = response;\n\n                        this.recharge.data.map((data) => {\n                            // 数量转为整数\n                            data.amount = Number(data.amount).toFixed(2);\n                            // 截取年月日\n                            let YMD = data.created_at.indexOf(' ');\n                            data.created_YMD = data.created_at.slice(0, YMD)\n                            // 截取时分秒\n                            let TMS = data.created_at.indexOf(' ');\n                            data.created_TMS = data.created_at.slice(TMS+1, data.created_at.length)\n                        });\n\n                        this.rechargeList = this.rechargeList.concat(this.recharge.data)\n                    },\n                    error: (response) => {\n\n                    },\n                    complete: (response) => {\n                        // 关闭列表滚动\n                        this.loading = false;\n                        if(this.rechargeList.length >= this.recharge.total){\n                            this.finished = true;\n                        }\n                    }\n                });\n            },\n            // 充值详情\n            handleWalletDetail: function(id) {\n                this.$router.push({\n                    path: '/walletRechargeDetail',\n                    query: {\n                        id: id\n                    }\n                });\n            }\n        }\n    }\n</script>\n"]}]}