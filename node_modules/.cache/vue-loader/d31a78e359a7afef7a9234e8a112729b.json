{"remainingRequest":"/Users/lirongzhi/Documents/深圳善链/h5/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lirongzhi/Documents/深圳善链/h5/src/view/my/integral/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lirongzhi/Documents/深圳善链/h5/src/view/my/integral/index.vue","mtime":1572538946807},{"path":"/Users/lirongzhi/Documents/深圳善链/h5/node_modules/cache-loader/dist/cjs.js","mtime":1572539003414},{"path":"/Users/lirongzhi/Documents/深圳善链/h5/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { Toast } from 'vant';\nimport mixins from '../../../common/mixin';\nimport navBar from '../../../component/navBar';\nimport countTo from 'vue-count-to';\n\nexport default {\n    components: {\n        Toast,\n        navBar,\n        countTo\n    },\n    mixins: [mixins],\n    data: () => ({\n        integralNumber: null,\n        freezeIntegral: null\n    }),\n    created () {\n        this.handleGetUserInfo();\n    },\n    // 设置路由钩子，存储页面来源\n    beforeRouteEnter(to, from, next) {\n        next(vm=>{          //  这里的vm指的就是vue实例，可以用来当做this使用\n            sessionStorage.setItem('url_from', from.path);\n        })\n    },\n    methods: {\n        // 初始化用户信息\n        handleGetUserInfo: function() {\n            this.request({\n                url: 'api/user',\n                method: 'GET',\n                data: { },\n                success: (response) => {\n                    this.freezeIntegral = Number(response.binfenji.current_integral);\n                },\n                error: (response) => {\n\n                },\n                complete: (response) => {\n                    Toast.clear();\n                }\n            });\n        },\n        // 选择全部\n        handleAll: function() {\n            this.integralNumber = Number(this.freezeIntegral);\n        },\n        // 提交划转\n        handleSublim: function() {\n            if(Number(this.integralNumber) <= 0) {\n                this.$toast.center('划转数量过小');\n                return false;\n            }\n            this.request({\n                url: 'api/transfer',\n                method: 'POST',\n                data: {\n                    nums: Number(this.integralNumber)\n                },\n                success: (response) => {\n                    this.$toast.center('划转成功');\n\n                    this.freezeIntegral -=  Number(this.integralNumber);\n                    this.integralNumber = 0;\n\n                    this.handleBack();\n                    // this.$router.replace({\n                    //     path: '/shopkeeperLoading',\n                    //     query: {\n                    //         name: '资产划转',\n                    //         type: 'integral'\n                    //     }\n                    // });\n                },\n                error: (response) => {\n\n                },\n                complete: () => {\n                    Toast.clear();\n                }\n            });\n        },\n        // 划转记录\n        handleRecord: function() {\n            this.$router.push({\n                path: '/myRecord',\n                query: {}\n            });\n        }\n    }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/view/my/integral","sourcesContent":["<template>\n\t<div class=\"integral-content\">\n\t\t<navBar title=\"资产划转\"></navBar>\n\t\t<div class=\"more\" @click=\"handleRecord\"><img src=\"../image/integral_ico.png\"/></div>\n\n\t\t<div class=\"integral\">\n\t\t\t<div class=\"integral-box\">\n\t\t\t\t<div class=\"from\">\n\t\t\t\t\t<img src=\"../image/bfj_logo.png\"/> <b>缤纷集UTD数量</b><div class=\"available\"> <countTo :startVal='0' :decimals=\"2\" :endVal='Number(freezeIntegral ? freezeIntegral : 0)' :duration='1'></countTo></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"arrowhead-icon\">\n\t\t\t\t<span class=\"arrowhead\"></span>\n\t\t\t\t<van-icon name=\"arrow-down\"/>\n\t\t\t</div>\n\t\t\t<div class=\"integral-box\">\n\t\t\t\t<div class=\"from\">\n\t\t\t\t\t<img src=\"../image/utd_logo.png\"/>\n\t\t\t\t\t<input type=\"number\" v-model=\"integralNumber\" placeholder=\"输入划转数量\" >\n\t\t\t\t\t<span @click=\"handleAll\" style=\"color:rgba(41, 66, 151, 1)\">全部</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"incoming\">\n\t\t\t<p><countTo :startVal='0' :decimals=\"2\" :endVal='Number(integralNumber)' :duration='1'></countTo></p>\n\t\t\t<span>到账数量</span>\n\t\t</div>\n\t\t<div class=\"tisp\">\n\t\t\t<p>最小划转数量为: 1.00 UTD。</p>\n\t\t\t<p>账户间的划转不收取手续费。</p>\n\t\t\t<p>划转资产实时到账，划转过程不可逆。</p>\n\t\t\t<p>请务必确认电脑及浏览器安全，防止信息被篡改或泄露。</p>\n\t\t</div>\n\t\t<div class=\"from-submit\" @click=\"handleSublim\">划转</div>\n\n\t</div>\n</template>\n\n<style src=\"./index.css\" scoped></style>\n\n<script>\n    import { Toast } from 'vant';\n    import mixins from '../../../common/mixin';\n    import navBar from '../../../component/navBar';\n    import countTo from 'vue-count-to';\n\n    export default {\n        components: {\n            Toast,\n            navBar,\n            countTo\n        },\n        mixins: [mixins],\n        data: () => ({\n            integralNumber: null,\n            freezeIntegral: null\n        }),\n        created () {\n            this.handleGetUserInfo();\n        },\n        // 设置路由钩子，存储页面来源\n        beforeRouteEnter(to, from, next) {\n            next(vm=>{          //  这里的vm指的就是vue实例，可以用来当做this使用\n                sessionStorage.setItem('url_from', from.path);\n            })\n        },\n        methods: {\n            // 初始化用户信息\n            handleGetUserInfo: function() {\n                this.request({\n                    url: 'api/user',\n                    method: 'GET',\n                    data: { },\n                    success: (response) => {\n                        this.freezeIntegral = Number(response.binfenji.current_integral);\n                    },\n                    error: (response) => {\n\n                    },\n                    complete: (response) => {\n                        Toast.clear();\n                    }\n                });\n            },\n            // 选择全部\n            handleAll: function() {\n                this.integralNumber = Number(this.freezeIntegral);\n            },\n            // 提交划转\n            handleSublim: function() {\n                if(Number(this.integralNumber) <= 0) {\n                    this.$toast.center('划转数量过小');\n                    return false;\n                }\n                this.request({\n                    url: 'api/transfer',\n                    method: 'POST',\n                    data: {\n                        nums: Number(this.integralNumber)\n                    },\n                    success: (response) => {\n                        this.$toast.center('划转成功');\n\n                        this.freezeIntegral -=  Number(this.integralNumber);\n                        this.integralNumber = 0;\n\n                        this.handleBack();\n                        // this.$router.replace({\n                        //     path: '/shopkeeperLoading',\n                        //     query: {\n                        //         name: '资产划转',\n                        //         type: 'integral'\n                        //     }\n                        // });\n                    },\n                    error: (response) => {\n\n                    },\n                    complete: () => {\n                        Toast.clear();\n                    }\n                });\n            },\n            // 划转记录\n            handleRecord: function() {\n                this.$router.push({\n                    path: '/myRecord',\n                    query: {}\n                });\n            }\n        }\n    }\n</script>\n"]}]}