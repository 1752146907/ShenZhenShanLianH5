{"remainingRequest":"/Users/lirongzhi/Documents/深圳善链/h5/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lirongzhi/Documents/深圳善链/h5/src/view/plus/shopx/seach/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lirongzhi/Documents/深圳善链/h5/src/view/plus/shopx/seach/index.vue","mtime":1572538946849},{"path":"/Users/lirongzhi/Documents/深圳善链/h5/node_modules/cache-loader/dist/cjs.js","mtime":1572539003414},{"path":"/Users/lirongzhi/Documents/深圳善链/h5/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { Dialog } from 'vant';\nimport mixins from '../../../../common/mixin';\nimport navBar from '../../../../component/navBar';\nimport Goods from '../component/goods/goods.css';\nimport Store from './store'\n\nexport default {\n    components: {\n        navBar,\n        Goods,\n        Dialog\n    },\n    mixins: [mixins],\n    data: () => ({\n        noSeach: false,\n        name: '',\n        seachHistory: Store.state.seachKey\n    }),\n    // 设置路由钩子，存储页面来源\n    beforeRouteEnter(to, from, next) {\n        next(vm => {          //  这里的vm指的就是vue实例，可以用来当做this使用\n            sessionStorage.setItem('url_from', from.path);\n        })\n    },\n    created() {\n\n    },\n    mounted() {\n        if (this.$route.query.noSeach) {\n            this.noSeach = true\n        }\n        if (this.$route.query.name) {\n            this.name = this.$route.query.name\n        }\n    },\n    methods: {\n        handleSeach: function () {\n            if (this.name == '') {\n                this.$toast.center('搜索内容不能为空');\n                return\n            }\n\n            this.$router.push({\n                path: '/plus/category/index',\n                query: {\n                    name: this.name,\n                    title: '搜索结果',\n                    isSeach: true\n                }\n            });\n            Store.state.seachKey = Store.state.seachKey.concat(this.name);\n            this.seachHistory = Store.state.seachKey;\n            this.isSeach = !this.isSeach;\n        },\n        handleClearSeach: function () {\n            this.noSeach = false;\n        },\n        handleSeachName: function (name) {\n            this.$router.push({\n                path: '/plus/category/index',\n                query: {\n                    name: name,\n                    title: '搜索结果',\n                    isSeach: true\n                }\n            });\n            this.isSeach = !this.isSeach;\n        },\n        handleDelteaHistroy: function () {\n            Dialog.confirm({\n                title: '温馨提示',\n                message: '确认删除搜索记录吗？',\n                confirmButtonColor: '#FF311E'\n            }).then(() => {\n                Store.state.seachKey = [];\n                this.seachHistory = Store.state.seachKey;\n            }).catch(() => {\n                // on cancel\n            });\n        },\n        handleGoHome: function () {\n            this.$router.replace({\n                path: '/plus/shopx/index',\n                query: {\n\n                }\n            });\n        }\n    }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/view/plus/shopx/seach","sourcesContent":["<template>\n    <div class=\"seach\">\n        <div @click=\"handleGoHome\" class=\"back-1\"></div>\n        <navBar title=\"商品搜索\"></navBar>\n        <van-search\n                placeholder=\"搜索商品\"\n                v-model=\"name\"\n                autofocus\n                @search=\"handleSeach\"\n                @input=\"handleClearSeach\"\n                show-action>\n            <div slot=\"action\" @click=\"handleSeach\">搜索</div>\n        </van-search>\n        <div class=\"seach-body\" v-if=\"seachHistory.length > 0 && !noSeach\">\n            <div class=\"title-box\">\n                <div class=\"title-box-title\">历史记录</div>\n                <img src=\"./image/del.png\" @click=\"handleDelteaHistroy\" alt=\"\">\n            </div>\n            <div class=\"sale-button-box\">\n               <span class=\"li\"\n                     v-for=\"(item, index) in seachHistory\"\n                     :key=\"index\"\n                     @click=\"handleSeachName(item)\">\n                   {{item}}\n               </span>\n            </div>\n        </div>\n        <div v-if=\"noSeach\" class=\"no-data\" style=\"padding-top: 150px\">\n            <img src=\"./image/seach.png\" class=\"no-data-image-icon\" alt=\"\">\n            <p>抱歉，没有找到“<span v-html=\"name\"></span>”相关的商品</p>\n            <p>您可以换个词再试试</p>\n        </div>\n    </div>\n</template>\n\n<style src=\"./index.css\" scoped></style>\n<script>\n    import { Dialog } from 'vant';\n    import mixins from '../../../../common/mixin';\n    import navBar from '../../../../component/navBar';\n    import Goods from '../component/goods/goods.css';\n    import Store from './store'\n\n    export default {\n        components: {\n            navBar,\n            Goods,\n            Dialog\n        },\n        mixins: [mixins],\n        data: () => ({\n            noSeach: false,\n            name: '',\n            seachHistory: Store.state.seachKey\n        }),\n        // 设置路由钩子，存储页面来源\n        beforeRouteEnter(to, from, next) {\n            next(vm => {          //  这里的vm指的就是vue实例，可以用来当做this使用\n                sessionStorage.setItem('url_from', from.path);\n            })\n        },\n        created() {\n\n        },\n        mounted() {\n            if (this.$route.query.noSeach) {\n                this.noSeach = true\n            }\n            if (this.$route.query.name) {\n                this.name = this.$route.query.name\n            }\n        },\n        methods: {\n            handleSeach: function () {\n                if (this.name == '') {\n                    this.$toast.center('搜索内容不能为空');\n                    return\n                }\n\n                this.$router.push({\n                    path: '/plus/category/index',\n                    query: {\n                        name: this.name,\n                        title: '搜索结果',\n                        isSeach: true\n                    }\n                });\n                Store.state.seachKey = Store.state.seachKey.concat(this.name);\n                this.seachHistory = Store.state.seachKey;\n                this.isSeach = !this.isSeach;\n            },\n            handleClearSeach: function () {\n                this.noSeach = false;\n            },\n            handleSeachName: function (name) {\n                this.$router.push({\n                    path: '/plus/category/index',\n                    query: {\n                        name: name,\n                        title: '搜索结果',\n                        isSeach: true\n                    }\n                });\n                this.isSeach = !this.isSeach;\n            },\n            handleDelteaHistroy: function () {\n                Dialog.confirm({\n                    title: '温馨提示',\n                    message: '确认删除搜索记录吗？',\n                    confirmButtonColor: '#FF311E'\n                }).then(() => {\n                    Store.state.seachKey = [];\n                    this.seachHistory = Store.state.seachKey;\n                }).catch(() => {\n                    // on cancel\n                });\n            },\n            handleGoHome: function () {\n                this.$router.replace({\n                    path: '/plus/shopx/index',\n                    query: {\n\n                    }\n                });\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}