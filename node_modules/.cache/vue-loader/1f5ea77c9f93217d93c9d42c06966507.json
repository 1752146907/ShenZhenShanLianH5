{"remainingRequest":"/Users/lirongzhi/Documents/深圳善链/h5/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lirongzhi/Documents/深圳善链/h5/src/view/login/password/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lirongzhi/Documents/深圳善链/h5/src/view/login/password/index.vue","mtime":1572538946795},{"path":"/Users/lirongzhi/Documents/深圳善链/h5/node_modules/cache-loader/dist/cjs.js","mtime":1572539003414},{"path":"/Users/lirongzhi/Documents/深圳善链/h5/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { DropdownMenu, DropdownItem, Toast } from 'vant';\nimport mixins from '../../../common/mixin';\nimport navBar from '../../../component/navBarTwo';\nimport Geet from \"../Geet.vue\";\n\nexport default {\n    components: {\n        DropdownMenu,\n        DropdownItem,\n        Toast,\n        navBar,\n        Geet\n    },\n    mixins: [mixins],\n    data: () => ({\n        mobile: '',\n        password: '',\n        isActivw: false,  // 是否激活提交按钮\n        isShowEye: true,\n        showCodeDialog: false  // 验证码弹框\n    }),\n    created() {\n        if(this.$route.query.mobile) {\n            this.mobile = this.$route.query.mobile.replace(/[ ]/g,\"\");\n        }\n        console.log(this.$route.query)\n    },\n    methods: {\n        GeetChange(val) {   // 极验图片加载之后，通过更改控制变量实现可以再次加载\n            this.showCodeDialog = val;\n        },\n        GeetPath(val) {     // 接受到图形验证参数，将参数发往服务端进行验证\n            this.handleLogin();\n            this.showCodeDialog = false;\n        },\n        handleHideEye: function() {\n            this.isShowEye = !this.isShowEye;\n        },\n        handleShowCodeDialog: function () {\n            if(this.password == '') {\n                this.$toast.center('密码不能为空');\n                return;\n            }\n            this.showCodeDialog = true\n        },\n        // 验证码登录\n        handleCheckLogin: function() {\n            this.$router.push({\n                path: '/login/code',\n                query: {\n                    type: 'password',\n                    title: '验码登录',\n                    mobile: this.mobile,\n                    collBack: this.$route.query.collBack ? this.$route.query.collBack : '/'\n                }\n            });\n        },\n        // 忘记密码\n        handleForgetLogin: function() {\n            this.$router.push({\n                path: '/login/code',\n                query: {\n                    type: 'forget',\n                    title: '重置密码',\n                    mobile: this.mobile,\n                    collBack: this.$route.query.collBack ? this.$route.query.collBack : '/'\n                }\n            });\n        },\n        handleLogin: function () {\n            this.request({\n                url: 'api/login',\n                data: {\n                    mobile: this.mobile,\n                    password: this.password\n                },\n                success: (response) => {\n                    // 存储access_token\n                    let access_token = response.token_type + ' ' + response.access_token\n                    this.$storage.setToken(access_token);\n\n                    // 存储过期时间戳\n                    let d = new Date();\n                    let times = d.getTime() + response.expires_in\n                    this.$storage.setTimeStamp(times);\n\n                    if(this.$route.query.collBack) {         // 判断是否有回调地址\n                        this.$router.replace({\n                            path: decodeURIComponent(this.$route.query.collBack),\n                            query: {}\n                        });\n                    } else{\n                         this.$router.replace({\n                             path: '/',\n                             query: {}\n                         });\n                     }\n                },\n                error: (response) => {\n                },\n                complete: () => {\n                    this.showCodeDialog = false\n                }\n            });\n        }\n    }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/view/login/password","sourcesContent":["<template>\n    <div class=\"login\">\n        <navBar title=\"密码登录\"></navBar>\n        <div class=\"login\">\n            <div class=\"login-hender\">\n                <img src=\"../../../image/login.png\" alt=\"\">\n            </div>\n            <div class=\"login-body\">\n                <div class=\"title\">密码登录</div>\n                <div class=\"input\">\n                    <input :type=\"isShowEye ? 'password' : 'text'\" v-model=\"password\" :clearable=\"true\" @focus=\"handleInputBlurBack\" placeholder=\"请输入密码\" />\n                    <img src=\"./image/eye01.png\" class=\"eye\" @click=\"handleHideEye\" v-if=\"!isShowEye\" alt=\"\" />\n                    <img src=\"./image/eye02.png\" class=\"eye\" @click=\"handleHideEye\" v-else alt=\"\" />\n                </div>\n                <div class=\"login-body-tisp\">\n                    <div class=\"login-body-number\" @click=\"handleCheckLogin\">验证码登录</div>\n                    <div class=\"login-body-revert\" @click=\"handleForgetLogin\">忘记密码</div>\n                </div>\n                <div class=\"next\" @click=\"handleShowCodeDialog\">登录</div>\n            </div>\n        </div>\n\n        <!-- showCodeDialog是一个布尔值，当前页面点击按钮，修改它，子组件监听数据变化，加载滑动模块 -->\n        <Geet :isGeet=\"showCodeDialog\" @geetPath=\"GeetPath\" @clickChange=\"GeetChange\"></Geet>\n    </div>\n</template>\n\n<style src=\"./index.css\" scoped></style>\n\n<script>\n    import { DropdownMenu, DropdownItem, Toast } from 'vant';\n    import mixins from '../../../common/mixin';\n    import navBar from '../../../component/navBarTwo';\n    import Geet from \"../Geet.vue\";\n\n    export default {\n        components: {\n            DropdownMenu,\n            DropdownItem,\n            Toast,\n            navBar,\n            Geet\n        },\n        mixins: [mixins],\n        data: () => ({\n            mobile: '',\n            password: '',\n            isActivw: false,  // 是否激活提交按钮\n            isShowEye: true,\n            showCodeDialog: false  // 验证码弹框\n        }),\n        created() {\n            if(this.$route.query.mobile) {\n                this.mobile = this.$route.query.mobile.replace(/[ ]/g,\"\");\n            }\n            console.log(this.$route.query)\n        },\n        methods: {\n            GeetChange(val) {   // 极验图片加载之后，通过更改控制变量实现可以再次加载\n                this.showCodeDialog = val;\n            },\n            GeetPath(val) {     // 接受到图形验证参数，将参数发往服务端进行验证\n                this.handleLogin();\n                this.showCodeDialog = false;\n            },\n            handleHideEye: function() {\n                this.isShowEye = !this.isShowEye;\n            },\n            handleShowCodeDialog: function () {\n                if(this.password == '') {\n                    this.$toast.center('密码不能为空');\n                    return;\n                }\n                this.showCodeDialog = true\n            },\n            // 验证码登录\n            handleCheckLogin: function() {\n                this.$router.push({\n                    path: '/login/code',\n                    query: {\n                        type: 'password',\n                        title: '验码登录',\n                        mobile: this.mobile,\n                        collBack: this.$route.query.collBack ? this.$route.query.collBack : '/'\n                    }\n                });\n            },\n            // 忘记密码\n            handleForgetLogin: function() {\n                this.$router.push({\n                    path: '/login/code',\n                    query: {\n                        type: 'forget',\n                        title: '重置密码',\n                        mobile: this.mobile,\n                        collBack: this.$route.query.collBack ? this.$route.query.collBack : '/'\n                    }\n                });\n            },\n            handleLogin: function () {\n                this.request({\n                    url: 'api/login',\n                    data: {\n                        mobile: this.mobile,\n                        password: this.password\n                    },\n                    success: (response) => {\n                        // 存储access_token\n                        let access_token = response.token_type + ' ' + response.access_token\n                        this.$storage.setToken(access_token);\n\n                        // 存储过期时间戳\n                        let d = new Date();\n                        let times = d.getTime() + response.expires_in\n                        this.$storage.setTimeStamp(times);\n\n                        if(this.$route.query.collBack) {         // 判断是否有回调地址\n                            this.$router.replace({\n                                path: decodeURIComponent(this.$route.query.collBack),\n                                query: {}\n                            });\n                        } else{\n                             this.$router.replace({\n                                 path: '/',\n                                 query: {}\n                             });\n                         }\n                    },\n                    error: (response) => {\n                    },\n                    complete: () => {\n                        this.showCodeDialog = false\n                    }\n                });\n            }\n        }\n    }\n</script>\n"]}]}