{"remainingRequest":"/Users/lirongzhi/Documents/深圳善链/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lirongzhi/Documents/深圳善链/src/view/plus/shopx/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lirongzhi/Documents/深圳善链/src/view/plus/shopx/index.vue","mtime":1572538946844},{"path":"/Users/lirongzhi/Documents/深圳善链/node_modules/cache-loader/dist/cjs.js","mtime":1572539003414},{"path":"/Users/lirongzhi/Documents/深圳善链/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { Toast, Search } from 'vant';\nimport mixins from '../../../common/mixin';\nimport navBar from '../../../component/navBar';\nimport Footer from './component/footer/footer';\nimport './component/goods/goods.css';\n\nimport { swiper, swiperSlide } from 'vue-awesome-swiper';\nimport 'swiper/dist/css/swiper.css'\n\nexport default {\n    components: {\n        Toast,\n        Search,\n        navBar,\n        swiper,\n        swiperSlide,\n        Footer\n    },\n    mixins: [mixins],\n\n    data: () => ({\n        loading: false,         // 滚动加载参数\n        finished: false,         // 滚动加载参数\n        page: 1,\n        size: 20,\n        swiperOption: {\n            speed: 1000,\n            autoplay: true,\n            pagination: {\n                el: '.swiper-pagination'\n            }\n        },\n        homeData: {},\n        transferRecord: {},\n        historyList: []\n     }),\n    // 设置路由钩子，存储页面来源\n    beforeRouteEnter(to, from, next) {\n        next(vm=>{          //  这里的vm指的就是vue实例，可以用来当做this使用\n            sessionStorage.setItem('url_from', from.path);\n        })\n    },\n    created () {\n\n    },\n    mounted() {\n        this.handleLoad();\n        this.handleGoodsList()\n    },\n    methods: {\n        // 首页数据\n        handleLoad: function() {\n            this.request({\n                url: 'api/store/home',\n                method: 'GET',\n                data: {\n\n                },\n                success: (response) => {\n                    this.homeData = response;\n                },\n                error: (response) => {\n\n                },\n                complete: () => {\n\n                }\n            });\n        },\n        // 商品列表\n        handleGoodsList: function () {\n            this.request({\n                url: 'api/store/goods',\n                method: 'GET',\n                data: {\n                    size: this.size,\n                    page: this.page\n                },\n                success: (response) => {\n                    this.transferRecord = response;\n\n                    // 价格切割\n                    this.transferRecord.list.map((data) => {\n                        if(data.min_price) {\n                            data.goods_min_price_num = data.min_price.substring(data.min_price.length - 2);\n                            data.min_price = data.min_price.substring(0, data.min_price.length - 2);\n                        }\n                    });\n\n                    // 把数组拼接上去\n                    this.historyList = this.historyList.concat(this.transferRecord.list);\n                },\n                error: (response) => {\n\n                },\n                complete: () => {\n                    // 关闭列表滚动\n                    this.loading = false;\n                    if(this.historyList.length >= this.transferRecord.total){\n                        this.finished = true;\n                    }\n                }\n            });\n        },\n        // 分类跳转\n        handleNavbar: function (id, name) {\n            this.$router.push({\n                path: '/plus/category/index',\n                query: {\n                    id: id,\n                    title: name\n                }\n            });\n        },\n        // 商品搜索\n        handleSeach: function () {\n            this.$router.push({\n                path: '/plus/shopx/seach',\n                query: {\n\n                }\n            })\n        },\n        // 返回Plus\n        handlePlus: function () {\n            this.$router.replace({\n                path: '/plus',\n                query: {\n\n                }\n            })\n        },\n        // 商品详情\n        handleGoods: function (id) {\n            this.$router.push({\n                path: '/plus/shopx/goods',\n                query: {\n                    id: id\n                }\n            })\n        },\n        // 下拉加载\n        rollLoad: function () {\n            if(this.historyList.length < this.transferRecord.total) {\n                this.page += 1;\n                this.handleGoodsList();\n            } else{\n                this.loading = false;\n                this.finished = true;\n            }\n        }\n    }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/view/plus/shopx","sourcesContent":["<template>\n   <div class=\"shopx\">\n       <div class=\"bar\">\n           <div class=\"bar-box\">\n               <van-icon class=\"bar-back\" @click=\"handlePlus\" name=\"arrow-left\" size=\"20\" />\n               商城\n           </div>\n       </div>\n       <div class=\"seach\" @click=\"handleSeach\">\n           <i class=\"van-icon van-icon-search\"></i>\n           搜索商品\n       </div>\n       <div class=\"banner\">\n           <swiper :options=\"swiperOption\">\n               <swiper-slide :style=\"'height: 155px;background: url(' + item.path + ') center;background-size: cover;'\"\n                             v-for=\"(item, index) in homeData.banner\"\n                             :key=\"index\"></swiper-slide>\n               <!--<swiper-slide style=\"height: 155px;background: url('https://yinghuo.binfenji.cn/uploads/20190729182107890c07736.jpg') center;background-size: cover;\"></swiper-slide>-->\n               <div class=\"swiper-pagination\" slot=\"pagination\"></div>\n           </swiper>\n       </div>\n       <div class=\"navbar\">\n           <van-grid :border=\"false\" :column-num=\"4\" v-if=\"homeData.category\">\n               <van-grid-item @click=\"handleNavbar(item.id, item.name)\"\n                              v-for=\"item in homeData.category.tree\"\n                              :key=\"item.id\"\n               >\n                   <van-image class=\"navbar-img\"\n                              v-if=\"item.image\"\n                              :src=\"item.image.path\" />\n                   <p>{{item.name}}</p>\n               </van-grid-item>\n           </van-grid>\n       </div>\n\n       <van-list v-model=\"loading\"\n                 :finished=\"finished\"\n                 :offset=\"300\"\n                 :immediate-check=\"false\"\n                 finished-text=\"没有更多了\"\n                 class=\"goods-box\"\n                 @load=\"rollLoad\" >\n           <div class=\"goods\">\n               <div class=\"goods-item\"\n                    @click=\"handleGoods(item.id)\"\n                    v-for=\"(item, index) in historyList\"\n                    :key=\"index\">\n                   <div class=\"goods-item-hander-box\">\n                       <div class=\"goods-item-hander\">\n                           <img v-if=\"item.image[0]\" :src=\"item.image[0].file.path\" alt=\"\">\n                       </div>\n                   </div>\n                   <div class=\"goods-item-body\">\n                       <div class=\"title line-clamp-two\">{{item.name.length > 15 ?item.name.substring(0,20)+ \"...\":item.name}}</div>\n                       <div class=\"price\">\n                           <span class=\"rmb\">¥</span>\n                           {{item.min_price}}\n                           <span class=\"num\">{{item.goods_min_price_num}}</span>\n                           <s v-if=\"item.sku[0]\">{{item.sku[0].line_price}}元</s>\n                       </div>\n                       <div class=\"goods-item-body-tab\">\n                           <strong v-for=\"children in item.available_pay_type\"\n                                   :key=\"children\">\n                               <span v-if=\"children == 1\">ETH</span>\n                               <span v-if=\"children == 2\">INE</span>\n                               <span v-if=\"children == 3\">UTD</span>\n                           </strong>\n                       </div>\n                   </div>\n               </div>\n           </div>\n       </van-list>\n\n       <Footer :active=\"0\" />\n   </div>\n</template>\n<style src=\"./index.css\" scoped></style>\n<script>\n    import { Toast, Search } from 'vant';\n    import mixins from '../../../common/mixin';\n    import navBar from '../../../component/navBar';\n    import Footer from './component/footer/footer';\n    import './component/goods/goods.css';\n\n    import { swiper, swiperSlide } from 'vue-awesome-swiper';\n    import 'swiper/dist/css/swiper.css'\n\n    export default {\n        components: {\n            Toast,\n            Search,\n            navBar,\n            swiper,\n            swiperSlide,\n            Footer\n        },\n        mixins: [mixins],\n\n        data: () => ({\n            loading: false,         // 滚动加载参数\n            finished: false,         // 滚动加载参数\n            page: 1,\n            size: 20,\n            swiperOption: {\n                speed: 1000,\n                autoplay: true,\n                pagination: {\n                    el: '.swiper-pagination'\n                }\n            },\n            homeData: {},\n            transferRecord: {},\n            historyList: []\n         }),\n        // 设置路由钩子，存储页面来源\n        beforeRouteEnter(to, from, next) {\n            next(vm=>{          //  这里的vm指的就是vue实例，可以用来当做this使用\n                sessionStorage.setItem('url_from', from.path);\n            })\n        },\n        created () {\n\n        },\n        mounted() {\n            this.handleLoad();\n            this.handleGoodsList()\n        },\n        methods: {\n            // 首页数据\n            handleLoad: function() {\n                this.request({\n                    url: 'api/store/home',\n                    method: 'GET',\n                    data: {\n\n                    },\n                    success: (response) => {\n                        this.homeData = response;\n                    },\n                    error: (response) => {\n\n                    },\n                    complete: () => {\n\n                    }\n                });\n            },\n            // 商品列表\n            handleGoodsList: function () {\n                this.request({\n                    url: 'api/store/goods',\n                    method: 'GET',\n                    data: {\n                        size: this.size,\n                        page: this.page\n                    },\n                    success: (response) => {\n                        this.transferRecord = response;\n\n                        // 价格切割\n                        this.transferRecord.list.map((data) => {\n                            if(data.min_price) {\n                                data.goods_min_price_num = data.min_price.substring(data.min_price.length - 2);\n                                data.min_price = data.min_price.substring(0, data.min_price.length - 2);\n                            }\n                        });\n\n                        // 把数组拼接上去\n                        this.historyList = this.historyList.concat(this.transferRecord.list);\n                    },\n                    error: (response) => {\n\n                    },\n                    complete: () => {\n                        // 关闭列表滚动\n                        this.loading = false;\n                        if(this.historyList.length >= this.transferRecord.total){\n                            this.finished = true;\n                        }\n                    }\n                });\n            },\n            // 分类跳转\n            handleNavbar: function (id, name) {\n                this.$router.push({\n                    path: '/plus/category/index',\n                    query: {\n                        id: id,\n                        title: name\n                    }\n                });\n            },\n            // 商品搜索\n            handleSeach: function () {\n                this.$router.push({\n                    path: '/plus/shopx/seach',\n                    query: {\n\n                    }\n                })\n            },\n            // 返回Plus\n            handlePlus: function () {\n                this.$router.replace({\n                    path: '/plus',\n                    query: {\n\n                    }\n                })\n            },\n            // 商品详情\n            handleGoods: function (id) {\n                this.$router.push({\n                    path: '/plus/shopx/goods',\n                    query: {\n                        id: id\n                    }\n                })\n            },\n            // 下拉加载\n            rollLoad: function () {\n                if(this.historyList.length < this.transferRecord.total) {\n                    this.page += 1;\n                    this.handleGoodsList();\n                } else{\n                    this.loading = false;\n                    this.finished = true;\n                }\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}