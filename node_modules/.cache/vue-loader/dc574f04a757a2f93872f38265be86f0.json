{"remainingRequest":"/Users/lirongzhi/Documents/深圳善链/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lirongzhi/Documents/深圳善链/src/view/my/shopkeeper/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lirongzhi/Documents/深圳善链/src/view/my/shopkeeper/index.vue","mtime":1572538946822},{"path":"/Users/lirongzhi/Documents/深圳善链/node_modules/cache-loader/dist/cjs.js","mtime":1572539003414},{"path":"/Users/lirongzhi/Documents/深圳善链/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\timport mixins from '../../../common/mixin';\n\timport navBar from '../../../component/navBar';\n\timport { Toast, Dialog, Popup } from 'vant';\n\n\texport default {\n\t\tcomponents: {\n\t\t\tnavBar,\n\t\t\tDialog,\n\t\t\tToast,\n\t\t\tPopup\n\t\t},\n\t\tmixins: [mixins],\n\t\tdata: () => ({\n\t\t\tisLoadSuccess: false,\t\t\t// 页面是否完成加载\n\t\t\twarrant: {},\t\t\t\t\t// 加载回来的数据\n\t\t\taccount: '',\t\t\t\t\t// 登录用户手机\n\t\t\tshowImagePreview: false  \t\t// 是否显示图片预览\n\t\t}),\n\n\t\tcreated () {\n\n\t\t},\n\t\t// 设置路由钩子，存储页面来源\n\t\tbeforeRouteEnter(to, from, next) {\n\t\t\tnext(vm=>{          //  这里的vm指的就是vue实例，可以用来当做this使用\n\t\t\t\tsessionStorage.setItem('url_from', from.path);\n\t\t\t})\n\t\t},\n\t\tmounted () {\n\t\t\tthis.handleLoad();\n\t\t\tthis.account = this.$route.query.account;\n\t\t},\n\t\tmethods: {\n\n\t\t\t//\t预览图片\n\t\t\tonChange(index) {\n\t\t\t\tthis.showImagePreview = true;\n\t\t\t},\n\t\t\t// 初始化信息\n\t\t\thandleLoad: function() {\n\t\t\t\tthis.request({\n\t\t\t\t\turl: 'api/warrant',\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tdata: {\n\t\t\t\t\t    type:1\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (response) => {\n\n\t\t\t\t\t\tthis.warrant = response;\n\t\t\t\t\t\tthis.isLoadSuccess = true;\n\n\n\t\t\t\t\t},\n\t\t\t\t\terror: (response) => {\n\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: (response) => {\n\t\t\t\t\t\tToast.clear();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 手机号码加密\n\t\t\thandlePhoneEncryption: function(phone, phone2) {\n\t\t\t\tvar tel = phone;\n\t\t\t\tvar tel2 = phone2;\n\t\t\t\ttel = \"\" + tel;\n\t\t\t\ttel2 = \"\" + tel2;\n\t\t\t\tvar reg=/(\\d{3})\\d{4}(\\d{4})/;\n\t\t\t\tvar tell1 = tel.replace(reg, \"$1****$2\");\n\t\t\t\tvar tell2 = tel2.replace(reg, \"$1****$2\");\n\n\t\t\t\tthis.account = tell1;\n\t\t\t\tthis.warrant.superior.phone = tell2;\n\t\t\t},\n            shopkeeperImg:function () {\n                this.$router.replace({\n                    path: '/plus',\n\n                });\n            },\n\t\t\thandleSubmit: function() {\n\t\t\t\t// 余额充足就正常支付，不足就跳去钱包首页充值\n\t\t\t\tif(Number(this.warrant.wallet.astir_currency) < Number(this.warrant.amount)) {\n                    Dialog.alert({\n                        title: '支付失败',\n                        message: '可用' + this.warrant.currency.short + '不足',\n                        confirmButtonColor: '#456DE7'\n                    }).then(() => {\n                        // on confirm\n                        // this.$router.push({\n                        //  path: '/walletRecharge',\n                        //  query: {\n                        //   title: this.warrant.currency.short,\n                        //   id: this.warrant.currency.id\n                        //  }\n                        // });\n                    });\n                } else {\n\t\t\t\t\t// 余额充足 抢购\n\t\t\t\t\tDialog.confirm({\n\t\t\t\t\t\ttitle: '支付',\n\t\t\t\t\t\tmessage: '应付' + this.warrant.amount + this.warrant.currency.short,\n\t\t\t\t\t\tconfirmButtonColor: '#456DE7'\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\t// on confirm\n\t\t\t\t\t\tthis.handleShopping();\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\t// on cancel\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleShopping: function() {\n\t\t\t\tthis.request({\n\t\t\t\t\turl: 'api/warrant',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: { },\n\t\t\t\t\tsuccess: (response) => {\n\t\t\t\t\t\tthis.$toast.center('认购成功');\n\n                        this.$router.replace({\n                            path: '/shopkeeperLoading',\n                            query: {\n                                name: '缤纷集店主',\n                                type: 'shopkeeperLoading'\n                            }\n                        });\n\t\t\t\t\t},\n\t\t\t\t\terror: (response) => {\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/view/my/shopkeeper","sourcesContent":["<template>\n\t<div v-if=\"isLoadSuccess\">\n\t\t<div class=\"shopkeeperImg\" >\n\t\t\t<i class=\"bar-back van-icon van-icon-arrow-left\" style=\"font-size: 20px;\" @click=\"shopkeeperImg\"><!----></i>\n\n\t\t缤纷集店主\n\t\t</div>\n\t\t<div class=\"shopkeeper-list-select\">\n\t\t\t<div class=\"shopkeeper-select\">\n\t\t\t\t<div class=\"shopkeeper-select-color\"><router-link to='/creation'>创世店主</router-link></div>\n\t\t\t<div><router-link to='/family'>家庭店主</router-link></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"shopkeeper\">\n\t\t\t<div>\n\t\t\t\t<router-view></router-view>\n\t\t\t</div>\n\t\t</div>\n\t\t<!--图片预览-->\n\t</div>\n</template>\n\n<style src=\"./index.css\" scoped>\n\n</style>\n\n<script>\n\timport mixins from '../../../common/mixin';\n\timport navBar from '../../../component/navBar';\n\timport { Toast, Dialog, Popup } from 'vant';\n\n\texport default {\n\t\tcomponents: {\n\t\t\tnavBar,\n\t\t\tDialog,\n\t\t\tToast,\n\t\t\tPopup\n\t\t},\n\t\tmixins: [mixins],\n\t\tdata: () => ({\n\t\t\tisLoadSuccess: false,\t\t\t// 页面是否完成加载\n\t\t\twarrant: {},\t\t\t\t\t// 加载回来的数据\n\t\t\taccount: '',\t\t\t\t\t// 登录用户手机\n\t\t\tshowImagePreview: false  \t\t// 是否显示图片预览\n\t\t}),\n\n\t\tcreated () {\n\n\t\t},\n\t\t// 设置路由钩子，存储页面来源\n\t\tbeforeRouteEnter(to, from, next) {\n\t\t\tnext(vm=>{          //  这里的vm指的就是vue实例，可以用来当做this使用\n\t\t\t\tsessionStorage.setItem('url_from', from.path);\n\t\t\t})\n\t\t},\n\t\tmounted () {\n\t\t\tthis.handleLoad();\n\t\t\tthis.account = this.$route.query.account;\n\t\t},\n\t\tmethods: {\n\n\t\t\t//\t预览图片\n\t\t\tonChange(index) {\n\t\t\t\tthis.showImagePreview = true;\n\t\t\t},\n\t\t\t// 初始化信息\n\t\t\thandleLoad: function() {\n\t\t\t\tthis.request({\n\t\t\t\t\turl: 'api/warrant',\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tdata: {\n\t\t\t\t\t    type:1\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (response) => {\n\n\t\t\t\t\t\tthis.warrant = response;\n\t\t\t\t\t\tthis.isLoadSuccess = true;\n\n\n\t\t\t\t\t},\n\t\t\t\t\terror: (response) => {\n\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: (response) => {\n\t\t\t\t\t\tToast.clear();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 手机号码加密\n\t\t\thandlePhoneEncryption: function(phone, phone2) {\n\t\t\t\tvar tel = phone;\n\t\t\t\tvar tel2 = phone2;\n\t\t\t\ttel = \"\" + tel;\n\t\t\t\ttel2 = \"\" + tel2;\n\t\t\t\tvar reg=/(\\d{3})\\d{4}(\\d{4})/;\n\t\t\t\tvar tell1 = tel.replace(reg, \"$1****$2\");\n\t\t\t\tvar tell2 = tel2.replace(reg, \"$1****$2\");\n\n\t\t\t\tthis.account = tell1;\n\t\t\t\tthis.warrant.superior.phone = tell2;\n\t\t\t},\n            shopkeeperImg:function () {\n                this.$router.replace({\n                    path: '/plus',\n\n                });\n            },\n\t\t\thandleSubmit: function() {\n\t\t\t\t// 余额充足就正常支付，不足就跳去钱包首页充值\n\t\t\t\tif(Number(this.warrant.wallet.astir_currency) < Number(this.warrant.amount)) {\n                    Dialog.alert({\n                        title: '支付失败',\n                        message: '可用' + this.warrant.currency.short + '不足',\n                        confirmButtonColor: '#456DE7'\n                    }).then(() => {\n                        // on confirm\n                        // this.$router.push({\n                        //  path: '/walletRecharge',\n                        //  query: {\n                        //   title: this.warrant.currency.short,\n                        //   id: this.warrant.currency.id\n                        //  }\n                        // });\n                    });\n                } else {\n\t\t\t\t\t// 余额充足 抢购\n\t\t\t\t\tDialog.confirm({\n\t\t\t\t\t\ttitle: '支付',\n\t\t\t\t\t\tmessage: '应付' + this.warrant.amount + this.warrant.currency.short,\n\t\t\t\t\t\tconfirmButtonColor: '#456DE7'\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\t// on confirm\n\t\t\t\t\t\tthis.handleShopping();\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\t// on cancel\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleShopping: function() {\n\t\t\t\tthis.request({\n\t\t\t\t\turl: 'api/warrant',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: { },\n\t\t\t\t\tsuccess: (response) => {\n\t\t\t\t\t\tthis.$toast.center('认购成功');\n\n                        this.$router.replace({\n                            path: '/shopkeeperLoading',\n                            query: {\n                                name: '缤纷集店主',\n                                type: 'shopkeeperLoading'\n                            }\n                        });\n\t\t\t\t\t},\n\t\t\t\t\terror: (response) => {\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n</script>\n"]}]}