{"remainingRequest":"/Users/lirongzhi/Documents/深圳善链/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lirongzhi/Documents/深圳善链/src/view/my/identity/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lirongzhi/Documents/深圳善链/src/view/my/identity/index.vue","mtime":1572538946804},{"path":"/Users/lirongzhi/Documents/深圳善链/node_modules/cache-loader/dist/cjs.js","mtime":1572539003414},{"path":"/Users/lirongzhi/Documents/深圳善链/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\timport { Toast, Dialog, ImagePreview, Overlay } from 'vant';\n\timport mixins from '../../../common/mixin';\n\timport reqwest from 'reqwest';\n    import application from '../../../common/application';\n\timport navBar from '../../../component/navBar';\n\timport ImageCompressor from 'image-compressor.js';\n\n\texport default {\n\t\tcomponents: {\n\t\t\tToast,\n\t\t\tImagePreview,\n\t\t\tnavBar,\n\t\t\tImageCompressor,\n\t\t\tDialog,\n\t\t\tOverlay\n\t\t},\n\t\tmixins: [mixins],\n\t\tdata: () => ({\n\t\t\tname: '',\t\t\t\t\t\t// 用户名称\n\t\t\tid_card: '',\t\t\t\t\t// 身份证id\n\t\t\tcard_front: '',\t\t\t\t    // 身份证正面\n\t\t\tcard_verso: '',\t\t\t\t    // 身份证反面\n\t\t\tcard_sign: '',\t\t\t\t    // 身份证正反面\n\t\t\tcardImage: {},\t\t\t\t\t// 要上传的身份证照片\n\t\t\tisShowIdDemo: false,\t\t\t// 是否显示事例\n\t\t\tshowIdDemoArr: [require('./image/id1.png'), require('./image/id2.png'), require('./image/id3.jpg')],\t\t// 事例数组\n\t\t\tstartDemoArr: 1,\t\t\t\t// 事例索引\n\t\t\tchackIsShow: false,\t\t\t\t// 提交确认弹框\n\t\t\tstartPosition: 0,\t\t\t\t// 图片预览索引\n\t\t\tshowImagePreview: false,\t\t// 是否显示图片预览\n\t\t\timagesPreviewArr: []\t\t\t// 预览数组\n\t\t}),\n\t\tcreated () {\n\t\t\t// 路由初始化赋值\n\t\t\tthis.status = this.$route.query.status;\n\t\t\tthis.name = this.$route.query.name;\n\t\t\tthis.id_card = this.$route.query.id_card;\n\t\t\t// 如果存在认证图片，添加到预览数组\n\t\t\tif(this.$route.query.datum){\n\t\t\t\tif(JSON.parse(this.$route.query.datum).length > 0){\n\t\t\t\t\tthis.card_front = this.$route.query.datum ? JSON.parse(this.$route.query.datum)[0].image_url : '';\n\t\t\t\t\tthis.card_verso = this.$route.query.datum ? JSON.parse(this.$route.query.datum)[1].image_url : '';\n\t\t\t\t\tthis.card_sign = this.$route.query.datum ? JSON.parse(this.$route.query.datum)[2].image_url : '';\n\n\t\t\t\t\tJSON.parse(this.$route.query.datum).map((data, index) => {\n\t\t\t\t\t\tthis.imagesPreviewArr.push(data.image_url);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// 设置路由钩子，存储页面来源\n\t\tbeforeRouteEnter(to, from, next) {\n\t\t\tnext(vm=>{          //  这里的vm指的就是vue实例，可以用来当做this使用\n\t\t\t\tsessionStorage.setItem('url_from', from.path);\n\t\t\t})\n\t\t},\n\t\tmethods: {\n\t\t\t// 预览事例\n\t\t\thandleIdDemo(index) {\n\t\t\t\tthis.startDemoArr = index;\n\t\t\t\tthis.isShowIdDemo = true;\n\t\t\t},\n\t\t\t//\t预览图片\n\t\t\tonChange(index) {\n\t\t\t\tthis.showImagePreview = true;\n\t\t\t\tthis.startPosition = index;\n\t\t\t},\n\t\t\t// 校验身份证号码\n\t\t\thandleCheckCode: function(val) {\n\t\t\t\tvar p = /^[1-9]\\d{5}(18|19|20)\\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\\d{3}[0-9Xx]$/;\n\t\t\t\tvar factor = [ 7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2 ];\n\t\t\t\tvar parity = [ 1, 0, 'X', 9, 8, 7, 6, 5, 4, 3, 2 ];\n\t\t\t\tvar code = val.substring(17);\n\t\t\t\tif(p.test(val)) {\n\t\t\t\t\tvar sum = 0;\n\t\t\t\t\tfor(var i=0;i<17;i++) {\n\t\t\t\t\t\tsum += val[i]*factor[i];\n\t\t\t\t\t}\n\t\t\t\t\tif(parity[sum % 11] == code.toUpperCase()) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\t// 校验信息\n\t\t\thandleChack: function() {\n\t\t\t\tif(this.name == \"\" || this.name == null) {\n\t\t\t\t\tthis.$toast.center('用户名不能为空');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif(this.handleCheckCode(this.id_card ? this.id_card : '0') == false) {\n\t\t\t\t\tthis.$toast.center('身份证号不合法');\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tif(this.id_card == \"\") {\n\t\t\t\t\tthis.$toast.center('身份证号不能为空');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif(this.card_front == \"\") {\n\t\t\t\t\tthis.$toast.center('身份证正面不能为空');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif(this.card_verso == \"\") {\n\t\t\t\t\tthis.$toast.center('身份证反面不能为空');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif(this.card_sign == \"\") {\n\t\t\t\t\tthis.$toast.center('手持身份证不能为空');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tthis.chackIsShow = true;\n\t\t\t},\n\t\t\t// 上传身份证正面\n\t\t\thandleCardFront: function (){\n\t\t\t\tthis.chackIsShow = false;\n\t\t\t\tthis.request({\n\t\t\t\t\turl: 'api/file',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\timage: this.card_front\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (response) => {\n\t\t\t\t\t\tthis.cardImage.card_front = response.url;\n                        this.handleCardVerso();\n\t\t\t\t\t},\n\t\t\t\t\terror: (response) => {\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: (response) => {\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 上传身份证反面\n\t\t\thandleCardVerso: function() {\n\t\t\t\tthis.request({\n\t\t\t\t\turl: 'api/file',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\timage: this.card_verso\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (response) => {\n\t\t\t\t\t\tthis.cardImage.card_verso = response.url;\n                        this.handleCardSign();\n\t\t\t\t\t},\n\t\t\t\t\terror: (response) => {\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: (response) => {\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 上传身份证正反面\n\t\t\thandleCardSign: function() {\n\t\t\t\tthis.request({\n\t\t\t\t\turl: 'api/file',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\timage: this.card_sign,\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (response) => {\n\t\t\t\t\t\tthis.cardImage.card_sign = response.url;\n                        this.handleSubmit();\n\t\t\t\t\t},\n\t\t\t\t\terror: (response) => {\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: (response) => {\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 提交认证信息\n\t\t\thandleSubmit: function() {\n\t\t\t\tthis.request({\n\t\t\t\t\turl: 'api/user',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tname: this.name,\n\t\t\t\t\t\tid_card: this.id_card,\n\t\t\t\t\t\tcard_front: this.cardImage.card_front,\n\t\t\t\t\t\tcard_verso: this.cardImage.card_verso,\n\t\t\t\t\t\tcard_sign: this.cardImage.card_sign\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (response) => {\n\t\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\t\tpath: '/identitySuccess',\n\t\t\t\t\t\t\tquery: {\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\terror: (response) => {\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: (response) => {\n\t\t\t\t\t\tToast.clear();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\thandleOversize: function(file) {\n\t\t\t\tthis.$toast.center('图片不能超过5M');\n\t\t\t},\n\t\t\t// 身证文件上传\n\t\t\thandleAfterCardFront: function(file) {\n\t\t\t\tif(this.name == '' || this.name == undefined) {\n\t\t\t\t\tthis.$toast.center('姓名不能为空');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.handleCheckCode(this.id_card ? this.id_card : '0') == false) {\n\t\t\t\t\tthis.$toast.center('请检查您的身份证号');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.handleFaceIdFront(file);\n\n\t\t\t\t// this.card_front = file.content;\n\t\t\t},\n\t\t\thandleAfterCardVerso: function(file) {\n\t\t\t\tif(this.name == '' || this.name == undefined) {\n\t\t\t\t\tthis.$toast.center('姓名不能为空');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.handleCheckCode(this.id_card ? this.id_card : '0') == false) {\n\t\t\t\t\tthis.$toast.center('请检查您的身份证号');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.card_front == \"\" || this.card_front == undefined) {\n\t\t\t\t\tthis.$toast.center('身份证正面不能为空');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.handleFaceIdBack(file);\n\n\t\t\t\t// this.card_verso = file.content;\n\t\t\t},\n\t\t\thandleAfterCardSign: function(file) {\n\t\t\t\tif(this.name == '' || this.name == undefined) {\n\t\t\t\t\tthis.$toast.center('姓名不能为空');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.handleCheckCode(this.id_card ? this.id_card : '0') == false) {\n\t\t\t\t\tthis.$toast.center('请检查您的身份证号');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.card_front == \"\" || this.card_front == undefined) {\n\t\t\t\t\tthis.$toast.center('身份证正面不能为空');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif(this.card_verso == \"\" || this.card_verso == undefined) {\n\t\t\t\t\tthis.$toast.center('身份证反面不能为空');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.handleFaceIdUTD(file);\n\n\t\t\t\t// this.card_sign = file.content;\n\t\t\t},\n\t\t\t// 阻止用户非法输入身份证号\n\t\t\thandleGetStatus: function (value) {\n\t\t\t\tif (this.id_card.length > 18) {\n\t\t\t\t\tthis.id_card = this.id_card.slice(0, 18);\n\t\t\t\t\tToast(\"身份证长度不能超过18位\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n                this.id_card = this.id_card.toUpperCase();\n\t\t\t},\n\t\t\t// FaceId校验正面信息\n\t\t\thandleFaceIdFront(file) {\n\t\t\t\tToast.loading({\n\t\t\t\t\tmask: true,\n\t\t\t\t\tduration: 0,\n\t\t\t\t\tmessage: '加载中...'\n\t\t\t\t});\n                new ImageCompressor(file.file, {\n                    quality: 0.4,\n                    maxWidth: 800,\n                    maxHeight: 800,\n                    success: (result) => {\n                        const reader = new FileReader();\n                        reader.onload = (e) => {\n                            let card_front = e.currentTarget.result;\n\t\t\t\t\t\t\tthis.card_front = card_front;\n\t\t\t\t\t\t\tToast.clear();\n\n                            // reqwest({\n                            //     url: 'https://api-cn.faceplusplus.com/cardpp/v1/ocridcard',\n                            //     method: 'POST',\n                            //     type: 'json',\n                            //     crossOrigin: true,\n                            //     headers: {\n                            //         // 'Content-Type': 'application/json',\n                            //         'Accept': 'application/vnd.website.v1+json'\n                            //     },\n                            //     data: {\n                            //         api_key: application.apiKey,                   // 调用此API的API Key\n                            //         api_secret: application.apiSecret,             // 调用此API的API Secret\n                            //         image_base64:  card_front                                   // base64编码的二进制图片数据\n                            //     },\n                            //     success: (response) => {\n                            //         if(response.cards.length <= 0) {\n\t\t\t\t\t\t\t// \t\t\t   this.$toast.center('图片不合法！');\n                            //             this.card_front = \"\";\n                            //             return\n                            //         }\n                            //         if(response.cards[0].name != this.name) {\n\t\t\t\t\t\t\t// \t\t\t   this.$toast.center('填写姓名和身份证照片姓名不一致');\n                            //             this.card_front = \"\";\n                            //             return\n                            //         }\n                            //         if(response.cards[0].id_card_number != this.id_card) {\n\t\t\t\t\t\t\t// \t\t\tNotify({\n\t\t\t\t\t\t\t// \t\t\t\tmessage: '填写身份证号码和照片号码不一致',\n\t\t\t\t\t\t\t// \t\t\t\tduration: 3000,\n\t\t\t\t\t\t\t// \t\t\t\tbackground: 'rgb(255, 68, 68)'\n\t\t\t\t\t\t\t// \t\t\t});\n                            //             this.card_front = \"\";\n                            //             return\n                            //         }\n\t\t\t\t\t\t\t// \t\tthis.card_front = card_front;\n                            //     },\n                            //     error: (response) => {\n                            //         // Toast.fail('网络繁忙，请稍后重试');\n                            //     },\n                            //     complete: (response) => {\n\t\t\t\t\t\t\t// \t\tToast.clear();\n                            //     }\n                            // });\n                        }\n                        // 执行图片压缩\n                        reader.readAsDataURL(result);\n                    }\n                });\n\t\t\t},\n\t\t\t// FaceId校验反面信息\n\t\t\thandleFaceIdBack(file) {\n\t\t\t\tToast.loading({\n\t\t\t\t\tmask: true,\n                    duration: 0,\n\t\t\t\t\tmessage: '加载中...'\n\t\t\t\t});\n                new ImageCompressor(file.file, {\n                    quality: 0.4,\n                    maxWidth: 800,\n                    maxHeight: 800,\n                    success: (result) => {\n                        const reader = new FileReader();\n                        reader.onload = (e) => {\n                            let card_verso = e.currentTarget.result;\n\t\t\t\t\t\t\tthis.card_verso = card_verso;\n\t\t\t\t\t\t\tToast.clear();\n\n                            // reqwest({\n                            //     url: 'https://api-cn.faceplusplus.com/cardpp/v1/ocridcard',\n                            //     method: 'POST',\n                            //     type: 'json',\n                            //     crossOrigin: true,\n                            //     headers: {\n                            //         // 'Content-Type': 'application/json',\n                            //         'Accept': 'application/vnd.website.v1+json'\n                            //     },\n                            //     data: {\n                            //         api_key: application.apiKey,                   // 调用此API的API Key\n                            //         api_secret: application.apiSecret,             // 调用此API的API Secret\n                            //         image_base64: card_verso                                       // base64编码的二进制图片数据\n                            //     },\n                            //     success: (response) => {\n                            //         if(response.cards.length <= 0) {\n\t\t\t\t\t\t\t// \t\t\tNotify({\n\t\t\t\t\t\t\t// \t\t\t\tmessage: '图片不合法',\n\t\t\t\t\t\t\t// \t\t\t\tduration: 3000,\n\t\t\t\t\t\t\t// \t\t\t\tbackground: 'rgb(255, 68, 68)'\n\t\t\t\t\t\t\t// \t\t\t});\n                            //             this.card_verso = \"\";\n                            //             return\n                            //         }\n                            //         if(!response.cards[0].valid_date) {\n\t\t\t\t\t\t\t// \t\t\tNotify({\n\t\t\t\t\t\t\t// \t\t\t\tmessage: '图片不合法',\n\t\t\t\t\t\t\t// \t\t\t\tduration: 3000,\n\t\t\t\t\t\t\t// \t\t\t\tbackground: 'rgb(255, 68, 68)'\n\t\t\t\t\t\t\t// \t\t\t});\n                            //             this.card_verso = \"\";\n                            //             return\n                            //         }\n                            //         // 截取时间，判断是否到期\n                            //         let calidDate = response.cards[0].valid_date.slice(11, response.cards[0].valid_date.length);\n                            //         let timer = new Date(calidDate);\n                            //         let thisDate = new Date();\n                            //         if(thisDate.getTime() > timer.getTime()) {\n\t\t\t\t\t\t\t// \t\t\tNotify({\n\t\t\t\t\t\t\t// \t\t\t\tmessage: '身份证已过期',\n\t\t\t\t\t\t\t// \t\t\t\tduration: 3000,\n\t\t\t\t\t\t\t// \t\t\t\tbackground: 'rgb(255, 68, 68)'\n\t\t\t\t\t\t\t// \t\t\t});\n\t\t\t\t\t\t\t// \t\t\tthis.card_verso = \"\"\n                            //             return\n                            //         }\n\t\t\t\t\t\t\t// \t\tthis.card_verso = card_verso;\n                            //     },\n                            //     error: (response) => {\n                            //         // Toast.fail('网络繁忙，请稍后重试');\n                            //     },\n                            //     complete: (response) => {\n\t\t\t\t\t\t\t// \t\tToast.clear();\n                            //     }\n                            // });\n                        }\n                        reader.readAsDataURL(result);\n\n                        Toast.clear();\n                    }\n                })\n\t\t\t},\n\t\t\t// FaceId校验手提UTD信息\n\t\t\thandleFaceIdUTD(file) {\n\t\t\t\tToast.loading({\n\t\t\t\t\tmask: true,\n                    duration: 0,\n\t\t\t\t\tmessage: '加载中...'\n\t\t\t\t});\n                new ImageCompressor(file.file, {\n                    quality: 0.4,\n                    maxWidth: 800,\n                    maxHeight: 800,\n                    success: (result) => {\n                        const reader = new FileReader();\n                        reader.onload = (e) => {\n                            let card_sign = e.currentTarget.result;\n\t\t\t\t\t\t\tthis.card_sign = card_sign;\n\t\t\t\t\t\t\tToast.clear();\n                            // 两个人脸匹配相似度\n\t\t\t\t\t\t\t// this.handleFactCompare(card_sign);\n\t\t\t\t\t\t\t// 图片是否包含utd\n                            // reqwest({\n                            //     url: \"https://api-cn.faceplusplus.com/imagepp/v1/recognizetext\",\n                            //     method: 'POST',\n                            //     type: 'json',\n                            //     crossOrigin: true,\n                            //     headers: {\n                            //         // 'Content-Type': 'application/json',\n                            //         'Accept': 'application/vnd.website.v1+json'\n                            //     },\n                            //     data: {\n                            //         api_key: application.apiKey,                   // 调用此API的API Key\n                            //         api_secret: application.apiSecret,             // 调用此API的API Secret\n                            //         image_base64: card_sign                                        // base64编码的二进制图片数据\n                            //     },\n                            //     success: (response) => {\n                            //         let isChackUtd = false;\n                            //         response.result.map((data) => {\n                            //             if(data.value.indexOf(\"utd\") > 0 || data.value.indexOf(\"UTD\") > 0 || data.value.indexOf(\"Utd\") > 0) {\n                            //                 isChackUtd = true\n                            //             }\n                            //         });\n                            //         if(isChackUtd) {\n                            //             this.card_sign = card_sign;\n                            //         } else{\n                            //             Toast.fail(\"缺少'UTD'信息\");\n                            //             this.card_sign = ''\n                            //         }\n                            //     },\n                            //     error: (response) => {\n                            //         this.card_sign = ''\n                            //         Toast.fail('提交失败，请稍后重试');\n                            //     },\n                            //     complete: (response) => { }\n                            // });\n                        }\n                        reader.readAsDataURL(result);\n\n                        Toast.clear();\n                    }\n                });\n\t\t\t},\n\t\t\t// 两个人脸进行比对\n\t\t\thandleFactCompare(card_sign) {\n\t\t\t\treqwest({\n\t\t\t\t    url: \"https://api-cn.faceplusplus.com/facepp/v3/compare\",\n\t\t\t\t    method: 'POST',\n\t\t\t\t    type: 'json',\n\t\t\t\t    crossOrigin: true,\n\t\t\t\t    headers: {\n\t\t\t\t        // 'Content-Type': 'application/json',\n\t\t\t\t        'Accept': 'application/vnd.website.v1+json'\n\t\t\t\t    },\n\t\t\t\t    data: {\n\t\t\t\t        api_key: application.apiKey,                   // 调用此API的API Key\n\t\t\t\t        api_secret: application.apiSecret,             // 调用此API的API Secret\n\t\t\t\t\t\timage_base64_1: this.card_front,                                       // 第一张base64编码的二进制图片数据\n\t\t\t\t\t\timage_base64_2: card_sign                                        // 第二张base64编码的二进制图片数据\n\t\t\t\t    },\n\t\t\t\t    success: (response) => {\n\t\t\t\t    \tif(response.confidence > 60) {\n\t\t\t\t\t\t\tthis.card_sign = card_sign;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tToast.fail('照片人物与身份证头像相似度过低');\n\t\t\t\t\t\t\tthis.card_sign = '';\n\t\t\t\t\t\t}\n\t\t\t\t    },\n\t\t\t\t    error: (response) => {\n\t\t\t\t        Toast.fail('提交失败，请稍后重试');\n\t\t\t\t    },\n\t\t\t\t    complete: (response) => { }\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/view/my/identity","sourcesContent":["<template>\n\t<div>\n\t\t<navBar title=\"身份认证\"></navBar>\n\t\t<div class=\"info\">\n\t\t\t<div class=\"info-item\">\n\t\t\t\t<p>姓名</p>\n\t\t\t\t<input v-model=\"name\" placeholder=\"请输入姓名\" type=\"text\">\n\t\t\t</div>\n\t\t\t<div class=\"info-item\">\n\t\t\t\t<p>身份证号</p>\n\t\t\t\t<input v-model=\"id_card\" style=\"text-transform:uppercase\" @input=\"handleGetStatus\" placeholder=\"请输入身份证号\" type=\"text\">\n\t\t\t</div>\n\t\t\t<p class=\"demo\" @click=\"handleIdDemo(0)\">示例</p>\n\t\t\t<div class=\"info-body margin-top-6\">\n\t\t\t\t<van-uploader :max-size=\"5242880\" @oversize=\"handleOversize\" :after-read=\"handleAfterCardFront\" v-if=\"JSON.parse(this.$route.query.datum).length == 0\">\n\t\t\t\t\t<div v-if=\"card_front\" class=\"info-body-preview\" :style ='{backgroundImage: \"url(\"+card_front+\")\"}'></div>\n\t\t\t\t\t<img v-else src=\"./image/identity01.jpg\" alt=\"\">\n\t\t\t\t</van-uploader>\n\t\t\t\t<van-image\n\t\t\t\t\t\tv-else\n\t\t\t\t\t\twidth=\"335px\"\n\t\t\t\t\t\theight=\"200px\"\n\t\t\t\t\t\tfit=\"cover\"\n\t\t\t\t\t\t:src=\"card_front\"\n\t\t\t\t\t\t@click=\"onChange(0)\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<p class=\"demo\" @click=\"handleIdDemo(1)\">示例</p>\n\t\t\t<div class=\"info-body\">\n\t\t\t\t<van-uploader :max-size=\"5242880\" @oversize=\"handleOversize\" :after-read=\"handleAfterCardVerso\" v-if=\"JSON.parse(this.$route.query.datum).length == 0\">\n\t\t\t\t\t<div v-if=\"card_verso\" class=\"info-body-preview\" :style ='{backgroundImage: \"url(\"+card_verso+\")\"}'></div>\n\t\t\t\t\t<img v-else src=\"./image/identity02.jpg\" alt=\"\">\n\t\t\t\t</van-uploader>\n\t\t\t\t<van-image\n\t\t\t\t\t\tv-else\n\t\t\t\t\t\twidth=\"335px\"\n\t\t\t\t\t\theight=\"200px\"\n\t\t\t\t\t\tfit=\"cover\"\n\t\t\t\t\t\t:src=\"card_verso\"\n\t\t\t\t\t\t@click=\"onChange(1)\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<p class=\"demo\" @click=\"handleIdDemo(2)\">示例</p>\n\t\t\t<div class=\"info-body\">\n\t\t\t\t<van-uploader :max-size=\"5242880\" @oversize=\"handleOversize\" :after-read=\"handleAfterCardSign\" v-if=\"JSON.parse(this.$route.query.datum).length == 0\">\n\t\t\t\t\t<div v-if=\"card_sign\" class=\"info-body-preview\" :style ='{backgroundImage: \"url(\"+card_sign+\")\"}'></div>\n\t\t\t\t\t<img v-else src=\"./image/identity03.jpg\" alt=\"\">\n\t\t\t\t</van-uploader>\n\t\t\t\t<van-image\n\t\t\t\t\t\tv-else\n\t\t\t\t\t\twidth=\"335px\"\n\t\t\t\t\t\theight=\"200px\"\n\t\t\t\t\t\tfit=\"cover\"\n\t\t\t\t\t\t:src=\"card_sign\"\n\t\t\t\t\t\t@click=\"onChange(2)\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"from-submit\" v-if=\"status == 1 || status == 4\" @click=\"handleChack\">提交</div>\n\t\t</div>\n\t\t<!--图片预览-->\n\t\t<van-image-preview\n\t\t\t\tv-model=\"showImagePreview\"\n\t\t\t\t:images=\"imagesPreviewArr\"\n\t\t\t\t:startPosition=\"startPosition\"\n\t\t\t\t@change=\"onChange\"\n\t\t/>\n\t\t<!--预览拍照事例-->\n\t\t<van-image-preview\n\t\t\t\tv-model=\"isShowIdDemo\"\n\t\t\t\t:images=\"showIdDemoArr\"\n\t\t\t\t:startPosition=\"startDemoArr\"\n\t\t\t\t@change=\"handleIdDemo\"\n\t\t/>\n\t\t<!--提交确弹框-->\n\t\t<div class=\"chack-show\" v-if=\"chackIsShow\">\n\t\t\t<div class=\"title\">\n\t\t\t\t<p>身份认证信息唯一</p>\n\t\t\t\t<p>认证通过后不可修改</p>\n\t\t\t</div>\n\t\t\t<div class=\"body\">缤纷集用户，请确认绑定手机号与官网注册手机号一致</div>\n\t\t\t<div class=\"footer\">\n\t\t\t\t<div class=\"footer-left\" @click=\"chackIsShow = false\">取消</div>\n\t\t\t\t<div class=\"footer-right\" @click=\"handleCardFront\">确认</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<van-overlay\n\t\t\t\t:show=\"chackIsShow\"\n\t\t\t\t@click=\"chackIsShow = false\"\n\t\t\t\tduration=\"0.5\"\n\t\t\t\tz-index=\"999\"\n\t\t/>\n\t</div>\n</template>\n\n<style src=\"./index.css\" scoped></style>\n\n<script>\n\timport { Toast, Dialog, ImagePreview, Overlay } from 'vant';\n\timport mixins from '../../../common/mixin';\n\timport reqwest from 'reqwest';\n    import application from '../../../common/application';\n\timport navBar from '../../../component/navBar';\n\timport ImageCompressor from 'image-compressor.js';\n\n\texport default {\n\t\tcomponents: {\n\t\t\tToast,\n\t\t\tImagePreview,\n\t\t\tnavBar,\n\t\t\tImageCompressor,\n\t\t\tDialog,\n\t\t\tOverlay\n\t\t},\n\t\tmixins: [mixins],\n\t\tdata: () => ({\n\t\t\tname: '',\t\t\t\t\t\t// 用户名称\n\t\t\tid_card: '',\t\t\t\t\t// 身份证id\n\t\t\tcard_front: '',\t\t\t\t    // 身份证正面\n\t\t\tcard_verso: '',\t\t\t\t    // 身份证反面\n\t\t\tcard_sign: '',\t\t\t\t    // 身份证正反面\n\t\t\tcardImage: {},\t\t\t\t\t// 要上传的身份证照片\n\t\t\tisShowIdDemo: false,\t\t\t// 是否显示事例\n\t\t\tshowIdDemoArr: [require('./image/id1.png'), require('./image/id2.png'), require('./image/id3.jpg')],\t\t// 事例数组\n\t\t\tstartDemoArr: 1,\t\t\t\t// 事例索引\n\t\t\tchackIsShow: false,\t\t\t\t// 提交确认弹框\n\t\t\tstartPosition: 0,\t\t\t\t// 图片预览索引\n\t\t\tshowImagePreview: false,\t\t// 是否显示图片预览\n\t\t\timagesPreviewArr: []\t\t\t// 预览数组\n\t\t}),\n\t\tcreated () {\n\t\t\t// 路由初始化赋值\n\t\t\tthis.status = this.$route.query.status;\n\t\t\tthis.name = this.$route.query.name;\n\t\t\tthis.id_card = this.$route.query.id_card;\n\t\t\t// 如果存在认证图片，添加到预览数组\n\t\t\tif(this.$route.query.datum){\n\t\t\t\tif(JSON.parse(this.$route.query.datum).length > 0){\n\t\t\t\t\tthis.card_front = this.$route.query.datum ? JSON.parse(this.$route.query.datum)[0].image_url : '';\n\t\t\t\t\tthis.card_verso = this.$route.query.datum ? JSON.parse(this.$route.query.datum)[1].image_url : '';\n\t\t\t\t\tthis.card_sign = this.$route.query.datum ? JSON.parse(this.$route.query.datum)[2].image_url : '';\n\n\t\t\t\t\tJSON.parse(this.$route.query.datum).map((data, index) => {\n\t\t\t\t\t\tthis.imagesPreviewArr.push(data.image_url);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// 设置路由钩子，存储页面来源\n\t\tbeforeRouteEnter(to, from, next) {\n\t\t\tnext(vm=>{          //  这里的vm指的就是vue实例，可以用来当做this使用\n\t\t\t\tsessionStorage.setItem('url_from', from.path);\n\t\t\t})\n\t\t},\n\t\tmethods: {\n\t\t\t// 预览事例\n\t\t\thandleIdDemo(index) {\n\t\t\t\tthis.startDemoArr = index;\n\t\t\t\tthis.isShowIdDemo = true;\n\t\t\t},\n\t\t\t//\t预览图片\n\t\t\tonChange(index) {\n\t\t\t\tthis.showImagePreview = true;\n\t\t\t\tthis.startPosition = index;\n\t\t\t},\n\t\t\t// 校验身份证号码\n\t\t\thandleCheckCode: function(val) {\n\t\t\t\tvar p = /^[1-9]\\d{5}(18|19|20)\\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\\d{3}[0-9Xx]$/;\n\t\t\t\tvar factor = [ 7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2 ];\n\t\t\t\tvar parity = [ 1, 0, 'X', 9, 8, 7, 6, 5, 4, 3, 2 ];\n\t\t\t\tvar code = val.substring(17);\n\t\t\t\tif(p.test(val)) {\n\t\t\t\t\tvar sum = 0;\n\t\t\t\t\tfor(var i=0;i<17;i++) {\n\t\t\t\t\t\tsum += val[i]*factor[i];\n\t\t\t\t\t}\n\t\t\t\t\tif(parity[sum % 11] == code.toUpperCase()) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\t// 校验信息\n\t\t\thandleChack: function() {\n\t\t\t\tif(this.name == \"\" || this.name == null) {\n\t\t\t\t\tthis.$toast.center('用户名不能为空');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif(this.handleCheckCode(this.id_card ? this.id_card : '0') == false) {\n\t\t\t\t\tthis.$toast.center('身份证号不合法');\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tif(this.id_card == \"\") {\n\t\t\t\t\tthis.$toast.center('身份证号不能为空');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif(this.card_front == \"\") {\n\t\t\t\t\tthis.$toast.center('身份证正面不能为空');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif(this.card_verso == \"\") {\n\t\t\t\t\tthis.$toast.center('身份证反面不能为空');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif(this.card_sign == \"\") {\n\t\t\t\t\tthis.$toast.center('手持身份证不能为空');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tthis.chackIsShow = true;\n\t\t\t},\n\t\t\t// 上传身份证正面\n\t\t\thandleCardFront: function (){\n\t\t\t\tthis.chackIsShow = false;\n\t\t\t\tthis.request({\n\t\t\t\t\turl: 'api/file',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\timage: this.card_front\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (response) => {\n\t\t\t\t\t\tthis.cardImage.card_front = response.url;\n                        this.handleCardVerso();\n\t\t\t\t\t},\n\t\t\t\t\terror: (response) => {\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: (response) => {\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 上传身份证反面\n\t\t\thandleCardVerso: function() {\n\t\t\t\tthis.request({\n\t\t\t\t\turl: 'api/file',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\timage: this.card_verso\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (response) => {\n\t\t\t\t\t\tthis.cardImage.card_verso = response.url;\n                        this.handleCardSign();\n\t\t\t\t\t},\n\t\t\t\t\terror: (response) => {\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: (response) => {\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 上传身份证正反面\n\t\t\thandleCardSign: function() {\n\t\t\t\tthis.request({\n\t\t\t\t\turl: 'api/file',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\timage: this.card_sign,\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (response) => {\n\t\t\t\t\t\tthis.cardImage.card_sign = response.url;\n                        this.handleSubmit();\n\t\t\t\t\t},\n\t\t\t\t\terror: (response) => {\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: (response) => {\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 提交认证信息\n\t\t\thandleSubmit: function() {\n\t\t\t\tthis.request({\n\t\t\t\t\turl: 'api/user',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tname: this.name,\n\t\t\t\t\t\tid_card: this.id_card,\n\t\t\t\t\t\tcard_front: this.cardImage.card_front,\n\t\t\t\t\t\tcard_verso: this.cardImage.card_verso,\n\t\t\t\t\t\tcard_sign: this.cardImage.card_sign\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (response) => {\n\t\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\t\tpath: '/identitySuccess',\n\t\t\t\t\t\t\tquery: {\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\terror: (response) => {\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: (response) => {\n\t\t\t\t\t\tToast.clear();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\thandleOversize: function(file) {\n\t\t\t\tthis.$toast.center('图片不能超过5M');\n\t\t\t},\n\t\t\t// 身证文件上传\n\t\t\thandleAfterCardFront: function(file) {\n\t\t\t\tif(this.name == '' || this.name == undefined) {\n\t\t\t\t\tthis.$toast.center('姓名不能为空');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.handleCheckCode(this.id_card ? this.id_card : '0') == false) {\n\t\t\t\t\tthis.$toast.center('请检查您的身份证号');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.handleFaceIdFront(file);\n\n\t\t\t\t// this.card_front = file.content;\n\t\t\t},\n\t\t\thandleAfterCardVerso: function(file) {\n\t\t\t\tif(this.name == '' || this.name == undefined) {\n\t\t\t\t\tthis.$toast.center('姓名不能为空');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.handleCheckCode(this.id_card ? this.id_card : '0') == false) {\n\t\t\t\t\tthis.$toast.center('请检查您的身份证号');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.card_front == \"\" || this.card_front == undefined) {\n\t\t\t\t\tthis.$toast.center('身份证正面不能为空');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.handleFaceIdBack(file);\n\n\t\t\t\t// this.card_verso = file.content;\n\t\t\t},\n\t\t\thandleAfterCardSign: function(file) {\n\t\t\t\tif(this.name == '' || this.name == undefined) {\n\t\t\t\t\tthis.$toast.center('姓名不能为空');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.handleCheckCode(this.id_card ? this.id_card : '0') == false) {\n\t\t\t\t\tthis.$toast.center('请检查您的身份证号');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.card_front == \"\" || this.card_front == undefined) {\n\t\t\t\t\tthis.$toast.center('身份证正面不能为空');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif(this.card_verso == \"\" || this.card_verso == undefined) {\n\t\t\t\t\tthis.$toast.center('身份证反面不能为空');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.handleFaceIdUTD(file);\n\n\t\t\t\t// this.card_sign = file.content;\n\t\t\t},\n\t\t\t// 阻止用户非法输入身份证号\n\t\t\thandleGetStatus: function (value) {\n\t\t\t\tif (this.id_card.length > 18) {\n\t\t\t\t\tthis.id_card = this.id_card.slice(0, 18);\n\t\t\t\t\tToast(\"身份证长度不能超过18位\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n                this.id_card = this.id_card.toUpperCase();\n\t\t\t},\n\t\t\t// FaceId校验正面信息\n\t\t\thandleFaceIdFront(file) {\n\t\t\t\tToast.loading({\n\t\t\t\t\tmask: true,\n\t\t\t\t\tduration: 0,\n\t\t\t\t\tmessage: '加载中...'\n\t\t\t\t});\n                new ImageCompressor(file.file, {\n                    quality: 0.4,\n                    maxWidth: 800,\n                    maxHeight: 800,\n                    success: (result) => {\n                        const reader = new FileReader();\n                        reader.onload = (e) => {\n                            let card_front = e.currentTarget.result;\n\t\t\t\t\t\t\tthis.card_front = card_front;\n\t\t\t\t\t\t\tToast.clear();\n\n                            // reqwest({\n                            //     url: 'https://api-cn.faceplusplus.com/cardpp/v1/ocridcard',\n                            //     method: 'POST',\n                            //     type: 'json',\n                            //     crossOrigin: true,\n                            //     headers: {\n                            //         // 'Content-Type': 'application/json',\n                            //         'Accept': 'application/vnd.website.v1+json'\n                            //     },\n                            //     data: {\n                            //         api_key: application.apiKey,                   // 调用此API的API Key\n                            //         api_secret: application.apiSecret,             // 调用此API的API Secret\n                            //         image_base64:  card_front                                   // base64编码的二进制图片数据\n                            //     },\n                            //     success: (response) => {\n                            //         if(response.cards.length <= 0) {\n\t\t\t\t\t\t\t// \t\t\t   this.$toast.center('图片不合法！');\n                            //             this.card_front = \"\";\n                            //             return\n                            //         }\n                            //         if(response.cards[0].name != this.name) {\n\t\t\t\t\t\t\t// \t\t\t   this.$toast.center('填写姓名和身份证照片姓名不一致');\n                            //             this.card_front = \"\";\n                            //             return\n                            //         }\n                            //         if(response.cards[0].id_card_number != this.id_card) {\n\t\t\t\t\t\t\t// \t\t\tNotify({\n\t\t\t\t\t\t\t// \t\t\t\tmessage: '填写身份证号码和照片号码不一致',\n\t\t\t\t\t\t\t// \t\t\t\tduration: 3000,\n\t\t\t\t\t\t\t// \t\t\t\tbackground: 'rgb(255, 68, 68)'\n\t\t\t\t\t\t\t// \t\t\t});\n                            //             this.card_front = \"\";\n                            //             return\n                            //         }\n\t\t\t\t\t\t\t// \t\tthis.card_front = card_front;\n                            //     },\n                            //     error: (response) => {\n                            //         // Toast.fail('网络繁忙，请稍后重试');\n                            //     },\n                            //     complete: (response) => {\n\t\t\t\t\t\t\t// \t\tToast.clear();\n                            //     }\n                            // });\n                        }\n                        // 执行图片压缩\n                        reader.readAsDataURL(result);\n                    }\n                });\n\t\t\t},\n\t\t\t// FaceId校验反面信息\n\t\t\thandleFaceIdBack(file) {\n\t\t\t\tToast.loading({\n\t\t\t\t\tmask: true,\n                    duration: 0,\n\t\t\t\t\tmessage: '加载中...'\n\t\t\t\t});\n                new ImageCompressor(file.file, {\n                    quality: 0.4,\n                    maxWidth: 800,\n                    maxHeight: 800,\n                    success: (result) => {\n                        const reader = new FileReader();\n                        reader.onload = (e) => {\n                            let card_verso = e.currentTarget.result;\n\t\t\t\t\t\t\tthis.card_verso = card_verso;\n\t\t\t\t\t\t\tToast.clear();\n\n                            // reqwest({\n                            //     url: 'https://api-cn.faceplusplus.com/cardpp/v1/ocridcard',\n                            //     method: 'POST',\n                            //     type: 'json',\n                            //     crossOrigin: true,\n                            //     headers: {\n                            //         // 'Content-Type': 'application/json',\n                            //         'Accept': 'application/vnd.website.v1+json'\n                            //     },\n                            //     data: {\n                            //         api_key: application.apiKey,                   // 调用此API的API Key\n                            //         api_secret: application.apiSecret,             // 调用此API的API Secret\n                            //         image_base64: card_verso                                       // base64编码的二进制图片数据\n                            //     },\n                            //     success: (response) => {\n                            //         if(response.cards.length <= 0) {\n\t\t\t\t\t\t\t// \t\t\tNotify({\n\t\t\t\t\t\t\t// \t\t\t\tmessage: '图片不合法',\n\t\t\t\t\t\t\t// \t\t\t\tduration: 3000,\n\t\t\t\t\t\t\t// \t\t\t\tbackground: 'rgb(255, 68, 68)'\n\t\t\t\t\t\t\t// \t\t\t});\n                            //             this.card_verso = \"\";\n                            //             return\n                            //         }\n                            //         if(!response.cards[0].valid_date) {\n\t\t\t\t\t\t\t// \t\t\tNotify({\n\t\t\t\t\t\t\t// \t\t\t\tmessage: '图片不合法',\n\t\t\t\t\t\t\t// \t\t\t\tduration: 3000,\n\t\t\t\t\t\t\t// \t\t\t\tbackground: 'rgb(255, 68, 68)'\n\t\t\t\t\t\t\t// \t\t\t});\n                            //             this.card_verso = \"\";\n                            //             return\n                            //         }\n                            //         // 截取时间，判断是否到期\n                            //         let calidDate = response.cards[0].valid_date.slice(11, response.cards[0].valid_date.length);\n                            //         let timer = new Date(calidDate);\n                            //         let thisDate = new Date();\n                            //         if(thisDate.getTime() > timer.getTime()) {\n\t\t\t\t\t\t\t// \t\t\tNotify({\n\t\t\t\t\t\t\t// \t\t\t\tmessage: '身份证已过期',\n\t\t\t\t\t\t\t// \t\t\t\tduration: 3000,\n\t\t\t\t\t\t\t// \t\t\t\tbackground: 'rgb(255, 68, 68)'\n\t\t\t\t\t\t\t// \t\t\t});\n\t\t\t\t\t\t\t// \t\t\tthis.card_verso = \"\"\n                            //             return\n                            //         }\n\t\t\t\t\t\t\t// \t\tthis.card_verso = card_verso;\n                            //     },\n                            //     error: (response) => {\n                            //         // Toast.fail('网络繁忙，请稍后重试');\n                            //     },\n                            //     complete: (response) => {\n\t\t\t\t\t\t\t// \t\tToast.clear();\n                            //     }\n                            // });\n                        }\n                        reader.readAsDataURL(result);\n\n                        Toast.clear();\n                    }\n                })\n\t\t\t},\n\t\t\t// FaceId校验手提UTD信息\n\t\t\thandleFaceIdUTD(file) {\n\t\t\t\tToast.loading({\n\t\t\t\t\tmask: true,\n                    duration: 0,\n\t\t\t\t\tmessage: '加载中...'\n\t\t\t\t});\n                new ImageCompressor(file.file, {\n                    quality: 0.4,\n                    maxWidth: 800,\n                    maxHeight: 800,\n                    success: (result) => {\n                        const reader = new FileReader();\n                        reader.onload = (e) => {\n                            let card_sign = e.currentTarget.result;\n\t\t\t\t\t\t\tthis.card_sign = card_sign;\n\t\t\t\t\t\t\tToast.clear();\n                            // 两个人脸匹配相似度\n\t\t\t\t\t\t\t// this.handleFactCompare(card_sign);\n\t\t\t\t\t\t\t// 图片是否包含utd\n                            // reqwest({\n                            //     url: \"https://api-cn.faceplusplus.com/imagepp/v1/recognizetext\",\n                            //     method: 'POST',\n                            //     type: 'json',\n                            //     crossOrigin: true,\n                            //     headers: {\n                            //         // 'Content-Type': 'application/json',\n                            //         'Accept': 'application/vnd.website.v1+json'\n                            //     },\n                            //     data: {\n                            //         api_key: application.apiKey,                   // 调用此API的API Key\n                            //         api_secret: application.apiSecret,             // 调用此API的API Secret\n                            //         image_base64: card_sign                                        // base64编码的二进制图片数据\n                            //     },\n                            //     success: (response) => {\n                            //         let isChackUtd = false;\n                            //         response.result.map((data) => {\n                            //             if(data.value.indexOf(\"utd\") > 0 || data.value.indexOf(\"UTD\") > 0 || data.value.indexOf(\"Utd\") > 0) {\n                            //                 isChackUtd = true\n                            //             }\n                            //         });\n                            //         if(isChackUtd) {\n                            //             this.card_sign = card_sign;\n                            //         } else{\n                            //             Toast.fail(\"缺少'UTD'信息\");\n                            //             this.card_sign = ''\n                            //         }\n                            //     },\n                            //     error: (response) => {\n                            //         this.card_sign = ''\n                            //         Toast.fail('提交失败，请稍后重试');\n                            //     },\n                            //     complete: (response) => { }\n                            // });\n                        }\n                        reader.readAsDataURL(result);\n\n                        Toast.clear();\n                    }\n                });\n\t\t\t},\n\t\t\t// 两个人脸进行比对\n\t\t\thandleFactCompare(card_sign) {\n\t\t\t\treqwest({\n\t\t\t\t    url: \"https://api-cn.faceplusplus.com/facepp/v3/compare\",\n\t\t\t\t    method: 'POST',\n\t\t\t\t    type: 'json',\n\t\t\t\t    crossOrigin: true,\n\t\t\t\t    headers: {\n\t\t\t\t        // 'Content-Type': 'application/json',\n\t\t\t\t        'Accept': 'application/vnd.website.v1+json'\n\t\t\t\t    },\n\t\t\t\t    data: {\n\t\t\t\t        api_key: application.apiKey,                   // 调用此API的API Key\n\t\t\t\t        api_secret: application.apiSecret,             // 调用此API的API Secret\n\t\t\t\t\t\timage_base64_1: this.card_front,                                       // 第一张base64编码的二进制图片数据\n\t\t\t\t\t\timage_base64_2: card_sign                                        // 第二张base64编码的二进制图片数据\n\t\t\t\t    },\n\t\t\t\t    success: (response) => {\n\t\t\t\t    \tif(response.confidence > 60) {\n\t\t\t\t\t\t\tthis.card_sign = card_sign;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tToast.fail('照片人物与身份证头像相似度过低');\n\t\t\t\t\t\t\tthis.card_sign = '';\n\t\t\t\t\t\t}\n\t\t\t\t    },\n\t\t\t\t    error: (response) => {\n\t\t\t\t        Toast.fail('提交失败，请稍后重试');\n\t\t\t\t    },\n\t\t\t\t    complete: (response) => { }\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n</script>\n"]}]}